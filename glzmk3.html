<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Web 页面加载关键性能指标 | KyleThanas</title>
    <meta name="description" content="KyleThanas的分享">
    
    
    <link rel="preload" href="/assets/css/0.styles.d6f0e1c6.css" as="style"><link rel="preload" href="/assets/js/app.c2126b61.js" as="script"><link rel="preload" href="/assets/js/2.70522405.js" as="script"><link rel="preload" href="/assets/js/36.070c5a9f.js" as="script"><link rel="prefetch" href="/assets/js/10.2da00ad7.js"><link rel="prefetch" href="/assets/js/11.c9375e3b.js"><link rel="prefetch" href="/assets/js/12.094767f2.js"><link rel="prefetch" href="/assets/js/13.e524fc65.js"><link rel="prefetch" href="/assets/js/14.5bc3c9a3.js"><link rel="prefetch" href="/assets/js/15.46ff7aa5.js"><link rel="prefetch" href="/assets/js/16.bdf20893.js"><link rel="prefetch" href="/assets/js/17.d9056cb9.js"><link rel="prefetch" href="/assets/js/18.df705048.js"><link rel="prefetch" href="/assets/js/19.acb7a427.js"><link rel="prefetch" href="/assets/js/20.23da4175.js"><link rel="prefetch" href="/assets/js/21.70fdb956.js"><link rel="prefetch" href="/assets/js/22.0ce04669.js"><link rel="prefetch" href="/assets/js/23.1966ac7a.js"><link rel="prefetch" href="/assets/js/24.ec851a3e.js"><link rel="prefetch" href="/assets/js/25.6882cd0d.js"><link rel="prefetch" href="/assets/js/26.3a77e34a.js"><link rel="prefetch" href="/assets/js/27.ba48b142.js"><link rel="prefetch" href="/assets/js/28.5809fd93.js"><link rel="prefetch" href="/assets/js/29.66b9eff1.js"><link rel="prefetch" href="/assets/js/3.516fd641.js"><link rel="prefetch" href="/assets/js/30.1c4f8fd8.js"><link rel="prefetch" href="/assets/js/31.735434a9.js"><link rel="prefetch" href="/assets/js/32.9f8e586a.js"><link rel="prefetch" href="/assets/js/33.001e7cba.js"><link rel="prefetch" href="/assets/js/34.9746db7c.js"><link rel="prefetch" href="/assets/js/35.c0353c93.js"><link rel="prefetch" href="/assets/js/37.89da0338.js"><link rel="prefetch" href="/assets/js/38.329f0963.js"><link rel="prefetch" href="/assets/js/39.7668168c.js"><link rel="prefetch" href="/assets/js/4.bb3de599.js"><link rel="prefetch" href="/assets/js/40.73dd8519.js"><link rel="prefetch" href="/assets/js/41.bcd03d19.js"><link rel="prefetch" href="/assets/js/42.57714a36.js"><link rel="prefetch" href="/assets/js/43.cea473c7.js"><link rel="prefetch" href="/assets/js/44.d02632b7.js"><link rel="prefetch" href="/assets/js/45.9c2ec33c.js"><link rel="prefetch" href="/assets/js/5.051ae465.js"><link rel="prefetch" href="/assets/js/6.ea18bcb2.js"><link rel="prefetch" href="/assets/js/7.95b35681.js"><link rel="prefetch" href="/assets/js/8.78970575.js"><link rel="prefetch" href="/assets/js/9.04bfa886.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d6f0e1c6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">KyleThanas</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="https://support.qq.com/product/65891" target="_blank" rel="noopener noreferrer" class="nav-link external">
  吐槽
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="https://support.qq.com/product/65891" target="_blank" rel="noopener noreferrer" class="nav-link external">
  吐槽
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>typescript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cqbaxh.html" class="sidebar-link">typescript（一）-- 概述</a></li><li><a href="/ybzci8.html" class="sidebar-link">typescript（二）-- 基础类型</a></li><li><a href="/ab0g2p.html" class="sidebar-link">typescript（三）-- 高级类型</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ngb45u.html" class="sidebar-link">ES7、ES8、ES9、ES10</a></li><li><a href="/el849f.html" class="sidebar-link">闭包&amp;内存泄漏</a></li><li><a href="/cm9fdg.html" class="sidebar-link">this指向</a></li><li><a href="/tpgpg0.html" class="sidebar-link">原型链</a></li><li><a href="/ofmc9g.html" class="sidebar-link">js微任务和宏任务</a></li><li><a href="/fzqecq.html" class="sidebar-link">渐进式Web应用程序（PWA）</a></li><li><a href="/es3vml.html" class="sidebar-link">Angular</a></li><li><a href="/lq3gzm.html" class="sidebar-link">页面渲染性能优化</a></li><li><a href="/uxy0d2.html" class="sidebar-link">前端2019（持续更新）</a></li><li><a href="/zy95lc.html" class="sidebar-link">FileReader总结</a></li><li><a href="/dd4f3r.html" class="sidebar-link">Promise总结</a></li><li><a href="/vouxdc.html" class="sidebar-link">Fetch总结</a></li><li><a href="/bf3n8q.html" class="sidebar-link">async/await总结</a></li><li><a href="/pil8ix.html" class="sidebar-link">有趣js</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>实用技术</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/nstgdi.html" class="sidebar-link">Git常用命令，及.gitignore的配置</a></li><li><a href="/evnxrm.html" class="sidebar-link">视频播放--自动播放</a></li><li><a href="/qcfngw.html" class="sidebar-link">js编码解码</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>读书</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>HTTP／2基础教程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wlych6.html" class="sidebar-link">Web性能的最佳实践</a></li><li><a href="/glzmk3.html" class="active sidebar-link">Web响应--关键性能指标</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/glzmk3.html#web-页面加载关键性能指标" class="sidebar-link">Web 页面加载关键性能指标</a></li><li class="sidebar-sub-header"><a href="/glzmk3.html#下面是我们需要记住的一些增加的方面" class="sidebar-link">下面是我们需要记住的一些增加的方面</a></li></ul></li><li><a href="/owi0qq.html" class="sidebar-link">Web响应--优化--HTTP/2</a></li><li><a href="/vwhq00.html" class="sidebar-link">Web响应--优化--服务端推送</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>《精通css》第三版</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/gi59fg.html" class="sidebar-link">第一天</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>杂学</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading open"><span>哲理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hyvqi3.html" class="sidebar-link">人生</a></li><li><a href="/phbr3v.html" class="sidebar-link">编程</a></li><li><a href="/quy23w.html" class="sidebar-link">职场</a></li><li><a href="/apg82h.html" class="sidebar-link">知乎精选</a></li><li><a href="/zrqivm.html" class="sidebar-link">拼搏的意义</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading"><span>MEGA</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ihd3eq.html" class="sidebar-link">MEGA7使用</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading"><span>Excel</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/lnadeg.html" class="sidebar-link">更改日期</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading"><span>装修</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yzgdkq.html" class="sidebar-link">家装注意事项</a></li><li><a href="/cvv7ox.html" class="sidebar-link">地板or瓷砖</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading"><span>茶叶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/nvd0og.html" class="sidebar-link">茶叶的分类</a></li><li><a href="/vy7e6o.html" class="sidebar-link">合适的茶叶与注意事项</a></li><li><a href="/usxmag.html" class="sidebar-link">区分茶叶的好坏</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading"><span>红葡萄酒</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/oqz9zt.html" class="sidebar-link">红酒和葡萄酒有什么区别</a></li><li><a href="/opxkta.html" class="sidebar-link">葡萄酒陈年</a></li><li><a href="/fiiet7.html" class="sidebar-link">单宁简介</a></li></ul></section></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h2 id="web-页面加载关键性能指标"><a href="#web-页面加载关键性能指标" aria-hidden="true" class="header-anchor">#</a> Web 页面加载关键性能指标</h2> <ul><li><span>延迟</span></li><li><span>带宽</span></li><li>DNS查询</li><li>建立链接时间</li><li>TLS协商时间</li><li>首字节时间（TTFB）</li><li>内容下载时间</li><li>开始渲染时间</li><li>文档加载完成时间（页面加载时间）</li></ul> <h4 id="延迟"><a href="#延迟" aria-hidden="true" class="header-anchor">#</a> 延迟</h4> <p><strong><span>延迟是指 </span></strong><strong><span>IP </span></strong><strong><span>数据包从一个网络端点到另一个网络端点所花费的时间。</span></strong><span style="background-color:transparent;">与之相关的是往返时延（ </span><span style="background-color:transparent;">RTT</span><span style="background-color:transparent;">），它是延迟的时间的两倍。</span><span>延迟是制约 </span><span>Web </span><span>性能的主要瓶颈，尤其对于</span><span>HTTP </span><span>这样的协议，因为其中包含大量往返于服务器的请求。</span></p> <h4 id="带宽"><a href="#带宽" aria-hidden="true" class="header-anchor">#</a> 带宽</h4> <p><strong><span>只要带宽没有饱和，两个网络端点之间的连接会一次处理尽可能多的数据量。</span></strong><span>依据</span><span>Web </span><span>页面引用资源的大小和网络连接的传输能力，带宽可能会成为性能的瓶颈。带宽在5M/s时候就可···</span></p> <h4 id="dns查询"><a href="#dns查询" aria-hidden="true" class="header-anchor">#</a> DNS查询</h4> <p><strong><span>在客户端能够获取 </span></strong><strong><span>Web </span></strong><strong><span>页面前，它需要通过域名系统（ </span></strong><strong><span>DNS</span></strong><strong><span>）把主机名称转换成 </span></strong><strong><span>IP </span></strong><strong><span>地址。</span></strong><span>获取的 </span><span>HTML </span><span>页面中所引用的各个不同域名也需要转换；幸运的是，一个域名只需转换一次。</span></p> <h4 id="建立连接时间"><a href="#建立连接时间" aria-hidden="true" class="header-anchor">#</a> 建立连接时间</h4> <p><span>在客户端和服务器之间建立连接需要往返数据应答，称为“三次握手”。握手时间一般与客户端和服务器之间的延迟有关。握手过程包括客户端向服务器发起一个 </span><span>SYN</span><span>包，接着服务器返回对应 </span><span>SYN </span><span>的 </span><span>ACK </span><span>响应以及新的 </span><span>SYN </span><span>包，然后客户端返回对应的</span><span>ACK。</span></p><p style="text-align:center;"><span><img alt="image.png" title="image.png" src="https://cdn.nlark.com/yuque/0/2019/png/124615/1563440384207-7c2997ce-e5fa-47e5-8671-3ad5273d228d.png#align=left&amp;display=inline&amp;height=337&amp;name=image.png&amp;originHeight=421&amp;originWidth=570&amp;size=47612&amp;status=done&amp;width=456" style="max-width:600px;width:456px;"></span></p> <h4 id="tls协商时间"><a href="#tls协商时间" aria-hidden="true" class="header-anchor">#</a> TLS协商时间</h4> <p><span>如果客户端发起 </span><span>HTTPS </span><span>连接，它还需要进行传输层安全协议（ </span><span>TLS</span><span>）协商； </span><span>TLS </span><span>用来取代安全套接层（ </span><span>SSL</span><span>）。除了服务器和客户端的计算处理耗时之外， </span><span>TLS </span><span>还会造成额外的往返传输。</span></p> <h4 id="首字节时间（-ttfb）"><a href="#首字节时间（-ttfb）" aria-hidden="true" class="header-anchor">#</a> 首字节时间（ TTFB）</h4> <p><span>TTFB </span><span>是指客户端从开始定位到 </span><span>Web </span><span>页面，至接收到主体页面响应的第一字节所耗费</span><span>的时间。它包含了之前提到的各种耗时，还要加上服务器处理时间。对于主体页面上的资源， </span><span>TTFB </span><span>测量的是从浏览器发起请求至收到其第一字节之间的耗时。</span></p> <h4 id="内容下载时间"><a href="#内容下载时间" aria-hidden="true" class="header-anchor">#</a> 内容下载时间</h4> <p><span>等同于被请求资源的最后字节到达时间（ </span><span>TTLB</span><span>）。</span></p> <h4 id="开始渲染时间"><a href="#开始渲染时间" aria-hidden="true" class="header-anchor">#</a> 开始渲染时间</h4> <p><span>客户端的屏幕上什么时候开始显示内容？</span><strong><span>这个指标测量的是用户看到空白页面的时长。</span></strong></p> <h4 id="文档加载完成时间（-又叫页面加载时间）"><a href="#文档加载完成时间（-又叫页面加载时间）" aria-hidden="true" class="header-anchor">#</a> 文档加载完成时间（ 又叫页面加载时间）</h4> <p><span>这是客户端浏览器认为页面加载</span><span>完毕</span><span>的时间。</span></p> <h2 id="下面是我们需要记住的一些增加的方面"><a href="#下面是我们需要记住的一些增加的方面" aria-hidden="true" class="header-anchor">#</a> 下面是我们需要记住的一些增加的方面</h2> <ul><li><span style="background-color:transparent;">更多的字节</span></li><li><span>更多的资源</span></li><li><span>更高的复杂度</span></li><li><span>更多的域名</span></li><li><span>更多的</span><span>TCP socket</span></li></ul> <h4 id="更多的字节"><a href="#更多的字节" aria-hidden="true" class="header-anchor">#</a> 更多的字节</h4> <p><span>Web </span><span>页面引用的内容每年都在增长，图片越来越大， </span><span>JavaScript </span><span>和 </span><span>CSS</span><span>也越来越大。内容体量变大意味着（客户端需要）下载更多的字节，也意味着更长的</span><span>页面加载时间。</span></p> <h4 id="更多的资源"><a href="#更多的资源" aria-hidden="true" class="header-anchor">#</a> 更多的资源</h4> <p><span>页面引用的资源不仅变大，而且数量也增多了。引用更多的资源会导致总耗时增加。</span></p> <h4 id="更高的复杂度"><a href="#更高的复杂度" aria-hidden="true" class="header-anchor">#</a> 更高的复杂度</h4> <p><span>随着我们添加更多、更丰富的功能， </span><span>Web </span><span>页面和所依赖的资源正变得越来越复杂。复杂度提升，伴随而来的是计算渲染 </span><span>Web </span><span>页面的时间不断延长，尤其是在处理能力较弱的移动设备上。</span></p> <h4 id="更多的域名"><a href="#更多的域名" aria-hidden="true" class="header-anchor">#</a> 更多的域名</h4> <p><span>Web </span><span>页面并不是从单一的域名拉取下来的，大多数 </span><span>Web </span><span>页面会关联数十个域名。每出现一个新域名都会增加 </span><span>DNS </span><span>查询耗时</span><span>、 </span><span>建立连接耗时</span><span>，以及 </span><span>TLS </span><span>协商耗时</span><span>。</span></p> <h4 id="更多的tcp-socket"><a href="#更多的tcp-socket" aria-hidden="true" class="header-anchor">#</a> 更多的TCP socket</h4> <p><span>为了应对某些方面的</span><span>增加</span><span>，客户端会对同一个域名开启多个 </span><span>socket</span><span>。这增加了与域名对应的服务器协商建立连接的开销，也加重了设备负担，还有可能导致网络连接过载，引发出错重传和缓存过满，并降低有效带宽。</span></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/wlych6.html" class="prev">
          Web性能的最佳实践
        </a></span> <span class="next"><a href="/owi0qq.html">
          Web响应--优化--HTTP/2
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c2126b61.js" defer></script><script src="/assets/js/2.70522405.js" defer></script><script src="/assets/js/36.070c5a9f.js" defer></script>
  </body>
</html>
