(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{251:function(e,t,r){"use strict";r.r(t);var n=r(28),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"fetch总结"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fetch总结"}},[e._v("#")]),e._v(" Fetch总结")]),e._v(" "),r("div",{staticClass:"lake-engine lake-typography-traditional",attrs:{"data-lake-element":"root","data-parser-by":"lake2html"}},[r("h2",{attrs:{id:"说明"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[e._v("#")]),e._v(" 说明")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("由于 Fetch API 是基于 Promise 设计，有必要先学习一下 Promise。旧浏览器不支持 Promise，需要使用 polyfill "),r("a",{attrs:{href:"https://github.com/stefanpenner/es6-promise",target:"_blank",rel:"noopener noreferrer"}},[e._v("es6-promise")]),e._v(" 。")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("如果不支持fetch也没有问题，可以使用第三方的ployfill来实现只会fetch："),r("a",{attrs:{href:"https://github.com/github/fetch",target:"_blank",rel:"noopener noreferrer"}},[e._v("whatwg-fetch")]),e._v(" 这个用的人多。")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h1",{attrs:{id:"开始"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#开始"}},[e._v("#")]),e._v(" 开始")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("发送一个json请求")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h3",{attrs:{id:"xhr方式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#xhr方式"}},[e._v("#")]),e._v(" XHR方式")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock","data-card-value":"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22var%20xhr%20%3D%20new%20XMLHttpRequest()%3B%5Cnxhr.open('GET'%2C%20url)%3B%5Cnxhr.responseType%20%3D%20'json'%3B%5Cnxhr.onload%20%3D%20function()%20%7B%5Cn%20%20console.log(xhr.response)%3B%5Cn%7D%3B%5Cnxhr.onerror%20%3D%20function()%20%7B%5Cn%20%20console.log(%5C%22Oops%2C%20error%5C%22)%3B%5Cn%7D%3B%5Cnxhr.send()%3B%22%2C%22id%22%3A%22PtbFU%22%7D",id:"PtbFU"}},[r("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(0, 0, 0)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[r("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[r("div",{staticClass:"language-undefined extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("var xhr = new XMLHttpRequest();\nxhr.open('GET', url);\nxhr.responseType = 'json';\nxhr.onload = function() {\n console.log(xhr.response);\n};\nxhr.onerror = function() {\n console.log(\"Oops, error\");\n};\nxhr.send(); \n")])])])])])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h4",{attrs:{id:"fetch方式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fetch方式"}},[e._v("#")]),e._v(" fetch方式")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock","data-card-value":"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22fetch(url).then(function(res)%20%7B%5Cn%20%20%20%20return%20res.json()%5Cn%7D).then(function(data)%20%7B%5Cn%20%20%20%20console.log(data)%3B%5Cn%7D).catch(function(e)%20%7B%5Cn%20%20%20%20console.error(e)%5Cn%7D)%22%2C%22id%22%3A%22NE2X3%22%7D",id:"NE2X3"}},[r("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(0, 0, 0)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[r("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[r("div",{staticClass:"language-undefined extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("fetch(url).then(function(res) {\n   return res.json()\n}).then(function(data) {\n   console.log(data);\n}).catch(function(e) {\n   console.error(e)\n}) \n")])])])])])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("或者：")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock","data-card-value":"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22fetch(url).then(response%20%3D%3E%20response.json())%5Cn%20%20.then(data%20%3D%3E%20console.log(data))%5Cn%20%20.catch(e%20%3D%3E%20console.error(e))%22%2C%22id%22%3A%22C9Axm%22%7D",id:"C9Axm"}},[r("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(0, 0, 0)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[r("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[r("div",{staticClass:"language-undefined extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("fetch(url).then(response => response.json())\n .then(data => console.log(data))\n .catch(e => console.error(e)) \n")])])])])])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("再或者：")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("blockquote",{staticStyle:{"margin-top":"5px","margin-bottom":"5px","padding-left":"1em","margin-left":"0px","border-left":"3px solid rgb(238, 238, 238)",opacity:"0.6"}},[r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("async/await 是非常新的 API，属于 ES7")])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock","data-card-value":"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22try%7B%5Cn%20%20%20%20let%20res%20%3D%20await%20fetch(url)%5Cn%20%20%20%20let%20data%20%3D%20await%20res.json()%5Cn%20%20%20%20console.log(data)%5Cn%7Dcatch(e)%20%7B%5Cn%20%20%20%20console.error(e)%5Cn%7D%22%2C%22id%22%3A%22inIf0%22%7D",id:"inIf0"}},[r("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(0, 0, 0)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[r("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[r("div",{staticClass:"language-undefined extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("try{\n   let res = await fetch(url)\n   let data = await res.json()\n   console.log(data)\n}catch(e) {\n   console.error(e)\n} \n")])])])])])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("使用 await 后，写异步代码就像写同步代码一样爽。await 后面可以跟 Promise 对象，表示等待 Promise resolve() 才会继续向下执行，如果 Promise 被 reject() 或抛出异常则会被外面的 try...catch 捕获。")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h4",{attrs:{id:"fetch-get请求初步"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fetch-get请求初步"}},[e._v("#")]),e._v(" fetch GET请求初步")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock","data-card-value":"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22fetch(url%2C%20%7B%5Cn%20%20%20%20method%3A%20'GET'%5Cn%7D)%5Cn.then((res)%20%3D%3E%20%7B%5Cn%20%20%20%20return%20res.text()%5Cn%7D)%5Cn.then((res)%20%3D%3E%20%7B%5Cn%20%20%20%20console.log(res)%5Cn%7D)%22%2C%22id%22%3A%22IhIKM%22%7D",id:"IhIKM"}},[r("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(0, 0, 0)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[r("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[r("div",{staticClass:"language-undefined extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("fetch(url, {\n   method: 'GET'\n})\n.then((res) => {\n   return res.text()\n})\n.then((res) => {\n   console.log(res)\n}) \n")])])])])])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h4",{attrs:{id:"fetch-get请求的参数传递"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fetch-get请求的参数传递"}},[e._v("#")]),e._v(" fetch GET请求的参数传递")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock","data-card-value":"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22fetch(url%20%2B%20'%3Fa%3D1%26b%3D2'%2C%20%7B%20%2F%2F%20%E5%9C%A8URL%E4%B8%AD%E5%86%99%E4%B8%8A%E4%BC%A0%E9%80%92%E7%9A%84%E5%8F%82%E6%95%B0%5Cn%20%20%20%20method%3A%20'GET'%5Cn%7D)%5Cn.then((res)%20%3D%3E%20%7B%5Cn%20%20%20%20return%20res.text()%5Cn%7D)%5Cn.then((res)%20%3D%3E%20%7B%5Cn%20%20%20%20console.log(res)%5Cn%7D)%22%2C%22id%22%3A%22oO3We%22%7D",id:"oO3We"}},[r("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(0, 0, 0)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[r("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[r("div",{staticClass:"language-undefined extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("fetch(url + '?a=1&b=2', { // 在URL中写上传递的参数\n   method: 'GET'\n})\n.then((res) => {\n   return res.text()\n})\n.then((res) => {\n   console.log(res)\n}) \n")])])])])])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h4",{attrs:{id:"fetch-post请求初步"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fetch-post请求初步"}},[e._v("#")]),e._v(" fetch POST请求初步")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock","data-card-value":"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22fetch(url%2C%20%7B%5Cn%20%20%20%20method%3A%20'POST'%20%2F%2F%20%E6%8C%87%E5%AE%9A%E6%98%AFPOST%E8%AF%B7%E6%B1%82%5Cn%7D)%5Cn.then((res)%3D%3E%7B%5Cn%20%20%20%20return%20res.text()%5Cn%7D)%5Cn.then((res)%3D%3E%7B%5Cn%20%20%20%20console.log(res)%5Cn%7D)%22%2C%22id%22%3A%22JFt7h%22%7D",id:"JFt7h"}},[r("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(0, 0, 0)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[r("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[r("div",{staticClass:"language-undefined extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("fetch(url, {\n   method: 'POST' // 指定是POST请求\n})\n.then((res)=>{\n   return res.text()\n})\n.then((res)=>{\n   console.log(res)\n}) \n")])])])])])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h4",{attrs:{id:"fetch-post请求参数的传递"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fetch-post请求参数的传递"}},[e._v("#")]),e._v(" fetch POST请求参数的传递")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock","data-card-value":"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22let%20formData%20%3D%20new%20FormData()%5CnformData.append('foo'%2C%201)%5CnformData.append('bar'%2C%202)%5Cnfetch(url%2C%20%7B%5Cn%20%20%20%20method%3A%20'POST'%2C%5Cn%20%20%20%20body%3A%20formData%2C%2F%2F%20%E8%BF%99%E9%87%8C%E6%98%AF%E8%AF%B7%E6%B1%82%E5%AF%B9%E8%B1%A1%5Cn%7D)%5Cn.then((res)%20%3D%3E%20%7B%5Cn%20%20%20%20return%20res.text()%5Cn%7D)%5Cn.then((res)%20%3D%3E%20%7B%5Cn%20%20%20%20console.log(res)%5Cn%7D)%22%2C%22id%22%3A%228sw56%22%7D",id:"8sw56"}},[r("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(0, 0, 0)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[r("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[r("div",{staticClass:"language-undefined extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("let formData = new FormData()\nformData.append('foo', 1)\nformData.append('bar', 2)\nfetch(url, {\n   method: 'POST',\n   body: formData,// 这里是请求对象\n})\n.then((res) => {\n   return res.text()\n})\n.then((res) => {\n   console.log(res)\n}) \n")])])])])])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h4",{attrs:{id:"fetch-设置请求的头信息"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fetch-设置请求的头信息"}},[e._v("#")]),e._v(" fetch 设置请求的头信息")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("在POST提交的过程中，一般是表单提交，可是，经过查询，发现默认的提交方式是："),r("code",[e._v("Content-Type:text/plain;charset=UTF-8")]),e._v("，这个显然是不合理的。")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock","data-card-value":"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22fetch(url%2C%20%7B%5Cn%20%20%20%20method%3A%20'POST'%2C%5Cn%20%20%20%20headers%3A%20new%20Headers(%7B%5Cn%20%20%20%20%20%20'Content-Type'%3A%20'application%2Fx-www-form-urlencoded'%20%2F%2F%20%E6%8C%87%E5%AE%9A%E6%8F%90%E4%BA%A4%E6%96%B9%E5%BC%8F%E4%B8%BA%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4%5Cn%20%20%20%20%7D)%2C%5Cn%20%20%20%20body%3A%20new%20URLSearchParams(%5B%5B%5C%22foo%5C%22%2C%201%5D%2C%5B%5C%22bar%5C%22%2C%202%5D%5D).toString()%5Cn%20%20%7D)%5Cn%20%20.then((res)%3D%3E%7B%5Cn%20%20%20%20return%20res.text()%5Cn%20%20%7D)%5Cn%20%20.then((res)%3D%3E%7B%5Cn%20%20%20%20console.log(res)%5Cn%20%20%7D)%22%2C%22id%22%3A%22Igfsk%22%7D",id:"Igfsk"}},[r("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(0, 0, 0)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[r("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[r("div",{staticClass:"language-undefined extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("fetch(url, {\n   method: 'POST',\n   headers: new Headers({\n     'Content-Type': 'application/x-www-form-urlencoded' // 指定提交方式为表单提交\n   }),\n   body: new URLSearchParams([[\"foo\", 1],[\"bar\", 2]]).toString()\n })\n .then((res)=>{\n   return res.text()\n })\n .then((res)=>{\n   console.log(res)\n }) \n")])])])])])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h4",{attrs:{id:"fetch-通过接口得到json数据"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fetch-通过接口得到json数据"}},[e._v("#")]),e._v(" fetch 通过接口得到JSON数据")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("上面所有的例子中都是返回一个文本")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock","data-card-value":"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22fetch(%5Cn%20%20%20%20url%2C%20%7B%20%2F%2F%20%E5%9C%A8URL%E4%B8%AD%E5%86%99%E4%B8%8A%E4%BC%A0%E9%80%92%E7%9A%84%E5%8F%82%E6%95%B0%5Cn%20%20%20%20%20%20%20%20method%3A%20'GET'%2C%5Cn%20%20%20%20%20%20%20%20headers%3A%20new%20Headers(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'Accept'%3A%20'application%2Fjson'%20%2F%2F%20%E9%80%9A%E8%BF%87%E5%A4%B4%E6%8C%87%E5%AE%9A%EF%BC%8C%E8%8E%B7%E5%8F%96%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%98%AFJSON%5Cn%20%20%20%20%20%20%20%20%7D)%5Cn%20%20%20%20%7D)%5Cn.then((res)%20%3D%3E%20%7B%5Cn%20%20%20%20return%20res.json()%20%2F%2F%20%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AAPromise%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%A7%A3%E6%9E%90%E6%88%90JSON%5Cn%7D)%5Cn.then((res)%20%3D%3E%20%7B%5Cn%20%20%20%20console.log(res)%20%2F%2F%20%E8%8E%B7%E5%8F%96JSON%E6%95%B0%E6%8D%AE%5Cn%7D)%22%2C%22id%22%3A%22ayNS5%22%7D",id:"ayNS5"}},[r("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(0, 0, 0)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[r("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[r("div",{staticClass:"language-undefined extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("fetch(\n   url, { // 在URL中写上传递的参数\n       method: 'GET',\n       headers: new Headers({\n           'Accept': 'application/json' // 通过头指定，获取的数据类型是JSON\n       })\n   })\n.then((res) => {\n   return res.json() // 返回一个Promise，可以解析成JSON\n})\n.then((res) => {\n   console.log(res) // 获取JSON数据\n}) \n")])])])])])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h4",{attrs:{id:"fetch-强制带cookie"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fetch-强制带cookie"}},[e._v("#")]),e._v(" fetch 强制带Cookie")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("默认情况下, fetch 不会从服务端发送或接收任何 cookies, 如果站点依赖于维护一个用户会话，则导致未经认证的请求(要发送 cookies，必须发送凭据头).")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("fetch(url, {")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("method: 'GET',")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("credentials: 'include' // 强制加入凭据头")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("})")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h4",{attrs:{id:"fetch-简单封装一下"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fetch-简单封装一下"}},[e._v("#")]),e._v(" fetch 简单封装一下")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock","data-card-value":"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22%2F**%5Cn%20*%20%E5%B0%86%E5%AF%B9%E8%B1%A1%E8%BD%AC%E6%88%90%20a%3D1%26b%3D2%E7%9A%84%E5%BD%A2%E5%BC%8F%5Cn%20*%20%40param%20obj%20%E5%AF%B9%E8%B1%A1%5Cn%20*%2F%5Cnfunction%20obj2String(obj%2C%20arr%20%3D%20%5B%5D%2C%20idx%20%3D%200)%20%7B%5Cn%20%20for%20(let%20item%20in%20obj)%20%7B%5Cn%20%20%20%20arr%5Bidx%2B%2B%5D%20%3D%20%5Bitem%2C%20obj%5Bitem%5D%5D%5Cn%20%20%7D%5Cn%20%20return%20new%20URLSearchParams(arr).toString()%5Cn%7D%5Cn%5Cn%2F**%5Cn%20*%20%E7%9C%9F%E6%AD%A3%E7%9A%84%E8%AF%B7%E6%B1%82%5Cn%20*%20%40param%20url%20%E8%AF%B7%E6%B1%82%E5%9C%B0%E5%9D%80%5Cn%20*%20%40param%20options%20%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%5Cn%20*%20%40param%20method%20%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F%5Cn%20*%2F%5Cnfunction%20commonFetcdh(url%2C%20options%2C%20method%20%3D%20'GET')%20%7B%5Cn%20%20const%20searchStr%20%3D%20obj2String(options)%5Cn%20%20let%20initObj%20%3D%20%7B%7D%5Cn%20%20if%20(method%20%3D%3D%3D%20'GET')%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E6%98%AFGET%E8%AF%B7%E6%B1%82%EF%BC%8C%E6%8B%BC%E6%8E%A5url%5Cn%20%20%20%20url%20%2B%3D%20'%3F'%20%2B%20searchStr%5Cn%20%20%20%20initObj%20%3D%20%7B%5Cn%20%20%20%20%20%20method%3A%20method%2C%5Cn%20%20%20%20%20%20credentials%3A%20'include'%5Cn%20%20%20%20%7D%5Cn%20%20%7D%20else%20%7B%5Cn%20%20%20%20initObj%20%3D%20%7B%5Cn%20%20%20%20%20%20method%3A%20method%2C%5Cn%20%20%20%20%20%20credentials%3A%20'include'%2C%5Cn%20%20%20%20%20%20headers%3A%20new%20Headers(%7B%5Cn%20%20%20%20%20%20%20%20'Accept'%3A%20'application%2Fjson'%2C%5Cn%20%20%20%20%20%20%20%20'Content-Type'%3A%20'application%2Fx-www-form-urlencoded'%5Cn%20%20%20%20%20%20%7D)%2C%5Cn%20%20%20%20%20%20body%3A%20searchStr%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%20%20fetch(url%2C%20initObj).then((res)%20%3D%3E%20%7B%5Cn%20%20%20%20return%20res.json()%5Cn%20%20%7D).then((res)%20%3D%3E%20%7B%5Cn%20%20%20%20return%20res%5Cn%20%20%7D)%5Cn%7D%5Cn%5Cn%2F**%5Cn%20*%20GET%E8%AF%B7%E6%B1%82%5Cn%20*%20%40param%20url%20%E8%AF%B7%E6%B1%82%E5%9C%B0%E5%9D%80%5Cn%20*%20%40param%20options%20%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%5Cn%20*%2F%5Cnfunction%20GET(url%2C%20options)%20%7B%5Cn%20%20return%20commonFetcdh(url%2C%20options%2C%20'GET')%5Cn%7D%5Cn%5Cn%2F**%5Cn%20*%20POST%E8%AF%B7%E6%B1%82%5Cn%20*%20%40param%20url%20%E8%AF%B7%E6%B1%82%E5%9C%B0%E5%9D%80%5Cn%20*%20%40param%20options%20%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%5Cn%20*%2F%5Cnfunction%20POST(url%2C%20options)%20%7B%5Cn%20%20return%20commonFetcdh(url%2C%20options%2C%20'POST')%5Cn%7D%22%2C%22id%22%3A%2233DPZ%22%7D",id:"33DPZ"}},[r("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(0, 0, 0)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[r("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[r("div",{staticClass:"language-undefined extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("/**\n* 将对象转成 a=1&b=2的形式\n* @param obj 对象\n*/\nfunction obj2String(obj, arr = [], idx = 0) {\n for (let item in obj) {\n   arr[idx++] = [item, obj[item]]\n }\n return new URLSearchParams(arr).toString()\n}\n\n/**\n* 真正的请求\n* @param url 请求地址\n* @param options 请求参数\n* @param method 请求方式\n*/\nfunction commonFetcdh(url, options, method = 'GET') {\n const searchStr = obj2String(options)\n let initObj = {}\n if (method === 'GET') { // 如果是GET请求，拼接url\n   url += '?' + searchStr\n   initObj = {\n     method: method,\n     credentials: 'include'\n   }\n } else {\n   initObj = {\n     method: method,\n     credentials: 'include',\n     headers: new Headers({\n       'Accept': 'application/json',\n       'Content-Type': 'application/x-www-form-urlencoded'\n     }),\n     body: searchStr\n   }\n }\n fetch(url, initObj).then((res) => {\n   return res.json()\n }).then((res) => {\n   return res\n })\n}\n\n/**\n* GET请求\n* @param url 请求地址\n* @param options 请求参数\n*/\nfunction GET(url, options) {\n return commonFetcdh(url, options, 'GET')\n}\n\n/**\n* POST请求\n* @param url 请求地址\n* @param options 请求参数\n*/\nfunction POST(url, options) {\n return commonFetcdh(url, options, 'POST')\n} \n")])])])])])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock","data-card-value":"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22GET('https%3A%2F%2Fwww.baidu.com%2Fsearch%2Ferror.html'%2C%20%7Ba%3A1%2Cb%3A2%7D)%5CnPOST('https%3A%2F%2Fwww.baidu.com%2Fsearch%2Ferror.html'%2C%20%7Ba%3A1%2Cb%3A2%7D)%22%2C%22id%22%3A%22SQ4qu%22%7D",id:"SQ4qu"}},[r("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(0, 0, 0)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[r("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[r("div",{staticClass:"language-undefined extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("GET('https://www.baidu.com/search/error.html', {a:1,b:2})\nPOST('https://www.baidu.com/search/error.html', {a:1,b:2}) \n")])])])])])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h2",{attrs:{id:"支持"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#支持"}},[e._v("#")]),e._v(" 支持")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("span",{attrs:{"data-card-type":"inline","data-lake-card":"image","data-card-value":"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F124615%2F1552380426413-f190eed9-ee6b-468b-802f-1bcf398904aa.png%22%2C%22originWidth%22%3A756%2C%22originHeight%22%3A411%2C%22size%22%3A0%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A746%2C%22height%22%3A406%7D"}},[r("img",{staticClass:"image lake-drag-image",staticStyle:{width:"746px",height:"406px",border:"none","box-shadow":"none",visibility:"visible"},attrs:{"data-role":"image",src:"https://cdn.nlark.com/yuque/0/2019/png/124615/1552380426413-f190eed9-ee6b-468b-802f-1bcf398904aa.png","data-raw-src":"https://cdn.nlark.com/yuque/0/2019/png/124615/1552380426413-f190eed9-ee6b-468b-802f-1bcf398904aa.png"}})])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("原生支持率并不高，幸运的是，引入下面这些 polyfill 后可以完美支持 IE8+ ：")]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[r("li",[e._v("由于 IE8 是 ES3，需要引入 ES5 的 polyfill: "),r("a",{attrs:{href:"https://github.com/es-shims/es5-shim",target:"_blank",rel:"noopener noreferrer"}},[e._v("es5-shim,es5-sham")])])]),r("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[r("li",[e._v("引入 Promise 的 polyfill: "),r("a",{attrs:{href:"https://github.com/stefanpenner/es6-promise",target:"_blank",rel:"noopener noreferrer"}},[e._v("es6-promise")])])]),r("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[r("li",[e._v("引入 fetch 探测库："),r("a",{attrs:{href:"https://github.com/camsong/fetch-detector",target:"_blank",rel:"noopener noreferrer"}},[e._v("fetch-detector")])])]),r("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[r("li",[e._v("引入 fetch 的 polyfill: "),r("a",{attrs:{href:"https://github.com/camsong/fetch-ie8",target:"_blank",rel:"noopener noreferrer"}},[e._v("fetch-ie8")])])]),r("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[r("li",[e._v("可选：如果你还使用了 jsonp，引入 "),r("a",{attrs:{href:"https://github.com/camsong/fetch-jsonp",target:"_blank",rel:"noopener noreferrer"}},[e._v("fetch-jsonp")])])]),r("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[r("li",[e._v("可选：开启 Babel 的 "),r("a",{attrs:{href:"https://babeljs.io/docs/en/babel-plugin-transform-runtime#docsNav",target:"_blank",rel:"noopener noreferrer"}},[e._v("runtime")]),e._v(" 模式 或者 使用"),r("a",{attrs:{href:"https://github.com/facebook/regenerator",target:"_blank",rel:"noopener noreferrer"}},[e._v("regenerator")]),e._v("，现在就使用 async/await")])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h2",{attrs:{id:"常见问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[e._v("#")]),e._v(" 常见问题")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[r("li",[e._v("Fetch 请求默认是不带 cookie 的，需要设置 "),r("code",[e._v("fetch(url, {credentials: 'include'})")]),e._v("。")])]),r("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[r("li",[e._v("服务器返回 400，500 错误码时并不会 reject，只有网络错误这些导致请求不能完成时，fetch 才会被 reject。")])]),r("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[r("li",[e._v("所有版本的 IE 均不支持原生 Fetch，fetch-ie8 会自动使用 XHR 做 polyfill。但在跨域时有个问题需要处理。IE8, 9 的 XHR 不支持 CORS 跨域。")])]),r("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[r("li",[e._v("Response返回一个被解析后的promise对象和数据，有这些解析方式：arrayBuffer()、blob()、、json()、text()、formData()")])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h2",{attrs:{id:"参考"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("ol",{staticStyle:{"list-style-type":"decimal",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{start:"1","lake-indent":"0"}},[r("li",[r("a",{attrs:{href:"https://segmentfault.com/a/1190000003810652",target:"_blank",rel:"noopener noreferrer"}},[e._v("传统 Ajax 已死，Fetch 永生")])])]),r("ol",{staticStyle:{"list-style-type":"decimal",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{start:"2","lake-indent":"0"}},[r("li",[r("a",{attrs:{href:"https://segmentfault.com/a/1190000011433064",target:"_blank",rel:"noopener noreferrer"}},[e._v("fetch，终于认识你")])])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),e._v(" "),r("h2",{attrs:{id:"总结"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[r("li",[e._v("语法简洁，更加语义化")])]),r("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[r("li",[e._v("基于标准 Promise 实现，支持 async/await")])]),r("ul",{staticStyle:{"list-style-type":"disc",margin:"0px","padding-left":"23px","font-size":"14px",color:"rgb(38, 38, 38)","line-height":"1.74","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word"},attrs:{"lake-indent":"0"}},[r("li",[e._v("同构方便，使用"),r("a",{attrs:{href:"https://github.com/matthew-andrews/isomorphic-fetch",target:"_blank",rel:"noopener noreferrer"}},[e._v("isomorphic-fetch")])])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")]),r("blockquote",{staticStyle:{"margin-top":"5px","margin-bottom":"5px","padding-left":"1em","margin-left":"0px","border-left":"3px solid rgb(238, 238, 238)",opacity:"0.6"}},[r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[e._v("注：同构(isomorphic/universal)就是使前后端运行同一套代码的意思，后端一般是指 NodeJS 环境。")])]),r("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[r("br")])])])}),[],!1,null,null,null);t.default=a.exports}}]);