(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{229:function(e,t,a){"use strict";a.r(t);var n=a(28),r=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"web响应-优化-http-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web响应-优化-http-2"}},[e._v("#")]),e._v(" Web响应--优化--HTTP/2")]),e._v(" "),a("div",{staticClass:"lake-engine lake-typography-traditional",attrs:{"data-lake-element":"root","data-parser-by":"lake2html"}},[a("p",{staticStyle:{"text-align":"left","font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[e._v("h1 ")]),a("span",[e._v("下的一些性能调优办法在 ")]),a("span",[e._v("h2 ")]),a("span",[e._v("下会起到反作用。")])]),a("p",{staticStyle:{"text-align":"center","font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",{attrs:{"data-card-type":"inline","data-lake-card":"image","data-card-value":"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F124615%2F1563443958748-e17bb455-168c-4211-9268-facdf6e8be98.png%22%2C%22originWidth%22%3A1056%2C%22originHeight%22%3A634%2C%22name%22%3A%22image.png%22%2C%22size%22%3A353000%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A844.8%2C%22height%22%3A507%7D"}},[a("img",{staticClass:"image lake-drag-image",staticStyle:{width:"778px",height:"467px",border:"none","box-shadow":"none",visibility:"visible"},attrs:{"data-role":"image",src:"https://cdn.nlark.com/yuque/0/2019/png/124615/1563443958748-e17bb455-168c-4211-9268-facdf6e8be98.png","data-raw-src":"https://cdn.nlark.com/yuque/0/2019/png/124615/1563443958748-e17bb455-168c-4211-9268-facdf6e8be98.png",alt:"image.png",title:"image.png"}})])]),a("p",{staticStyle:{"text-align":"left","font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("br")]),e._v(" "),a("h2",{attrs:{id:"域名拆分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#域名拆分"}},[e._v("#")]),e._v(" 域名拆分")]),e._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("br")]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[e._v("域名拆分是为了利用浏览器对每个域名开启多个连接的能力，以便实现资源的并行下载，绕过 ")]),a("span",[e._v("h1 ")]),a("span",[e._v("的串行化下载的限制。")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("strong",[a("span",[e._v("因为 ")])]),a("strong",[a("span",[e._v("HTTP/2 ")])]),a("strong",[a("span",[e._v("采取多路复用，所以域名拆分就不是必要的了")])]),a("span",[e._v("，并且反而会让协议力图实现的目标落空。")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[a("br")])]),e._v(" "),a("h2",{attrs:{id:"资源内联"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#资源内联"}},[e._v("#")]),e._v(" 资源内联")]),e._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[a("br")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[e._v("资源内联包括把 ")]),a("span",[e._v("JavaScript")]),a("span",[e._v("、样式，甚至图片插入到 ")]),a("span",[e._v("HTML ")]),a("span",[e._v("页面中，目的是省掉加载外部资源所需的新连接以及请求响应的时间。")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[e._v("然而，有些 ")]),a("span",[e._v("Web ")]),a("span",[e._v("性能的最佳实践不推荐使用内联，因为这样会损失更有价值的特性，比如缓存。如果有同一个页面上的重复访问，缓存通常可以减少请求数（而且能够加速页面渲染）。")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("strong",[a("span",[e._v("使用 ")])]),a("strong",[a("span",[e._v("h2 ")])]),a("strong",[a("span",[e._v("时的一般原则是避免内联，但是内联也并不一定毫无价值。")])])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("br")]),e._v(" "),a("h2",{attrs:{id:"资源合并"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#资源合并"}},[e._v("#")]),e._v(" 资源合并")]),e._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[a("br")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[e._v("资源合并意味着把几个小文件合并成一个大文件。")]),a("span",[e._v("它与内联很相似，旨在省掉那些加载外部资源的请求响应时间，以及解码 ")]),a("span",[e._v("/ ")]),a("span",[e._v("执行那些资源所消耗的 ")]),a("span",[e._v("CPU ")]),a("span",[e._v("资源。")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("br")]),e._v(" "),a("h2",{attrs:{id:"禁用cookie的域名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#禁用cookie的域名"}},[e._v("#")]),e._v(" 禁用cookie的域名")]),e._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[a("br")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[e._v("通过禁用 ")]),a("span",[e._v("cookie ")]),a("span",[e._v("的域名来提供静态资源是一项标准的性能优化最佳实践。尤其是使用 ")]),a("span",[e._v("h1")]),a("span",[e._v("时，你无法压缩首部，而且有些网站使用的 ")]),a("span",[e._v("cookie ")]),a("span",[e._v("大小常常超过单个 ")]),a("span",[e._v("TCP ")]),a("span",[e._v("数据包的限度。"),a("br"),e._v("不过，在 ")]),a("span",[e._v("h2 ")]),a("span",[e._v("下请求首部使用 ")]),a("span",[e._v("HPACK ")]),a("span",[e._v("算法被压缩，会显著减少巨型 ")]),a("span",[e._v("cookie")]),a("span",[e._v("（尤其是当它们在先后请求之间保持不变）的字节数。与此同时，禁用 ")]),a("span",[e._v("cookie ")]),a("span",[e._v("的域名需要额外的主机名称，这意味着将开启更多的连接。")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[a("br")])]),e._v(" "),a("h2",{attrs:{id:"生成精灵图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成精灵图"}},[e._v("#")]),e._v(" 生成精灵图")]),e._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[a("br")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[e._v("生成精灵图仍是一种避免小资源请求过多的技术。")]),a("span",[e._v("为了生成精灵图，开发者把较小的图片拼合成较大的图片，然后用 ")]),a("span",[e._v("CSS ")]),a("span",[e._v("选择图片中某个部分展示出来。")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[e._v("依据设备及其硬件图形处理能力的不同，精灵图要么非常高效，要么非常低效。如果用 ")]),a("span",[e._v("h2")]),a("span",[e._v("，最佳实践就是避免生成精灵图；主要原因在于，多路复用和首部压")]),a("span",[e._v("缩去掉了大量的请求开销。即便如此，还是有些场景适合使用精灵图。")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[a("br")])]),e._v(" "),a("h2",{attrs:{id:"资源预取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#资源预取"}},[e._v("#")]),e._v(" 资源预取")]),e._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[a("br")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[e._v("资源预取也是一项 ")]),a("span",[e._v("Web ")]),a("span",[e._v("性能优化手段，它“提示”浏览器，只要有可能就继续下载可缓存资源，并把这些资源缓存起来。尽管如此，如果浏览器很忙，或者资源下载花的时间太长，预取请求将会被忽略。资源预取可以在 ")]),a("span",[e._v("HTML ")]),a("span",[e._v("中插入 ")]),a("span",[e._v("link ")]),a("span",[e._v("标签实现：")])]),a("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock","data-card-value":"data:%7B%22mode%22%3A%22html%22%2C%22code%22%3A%22%3Clink%20rel%3D%5C%22prefetch%5C%22%20href%3D%5C%22%2Fimportant.css%5C%22%3E%22%2C%22id%22%3A%22NeRg8%22%7D",id:"NeRg8"}},[a("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(0, 0, 0)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[a("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[a("div",{staticClass:"language-undefined extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<link rel="prefetch" href="/important.css"> \n')])])])])])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[e._v("也可以使用 ")]),a("span",[e._v("HTTP ")]),a("span",[e._v("响应中的 ")]),a("span",[e._v("Link ")]),a("span",[e._v("首部：")])]),a("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock","data-card-value":"data:%7B%22mode%22%3A%22html%22%2C%22code%22%3A%22Link%3A%20%3C%2Fimportant.css%3E%3B%20rel%3Dprefetch%22%2C%22id%22%3A%22sv1LM%22%7D",id:"sv1LM"}},[a("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(0, 0, 0)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[a("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[a("div",{staticClass:"language-undefined extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Link: ; rel=prefetch \n")])])])])])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",[e._v("资源预取与 ")]),a("span",[e._v("h2 ")]),a("span",[e._v("引入的服务端推送并没多少关联。服务端推送用于让资源更快到达浏览器，而资源预取相比推送的优点之一是，如果资源已经在缓存里，浏览器就不会浪费时间和带宽重复请求它。所以，请把它看作 ")]),a("span",[e._v("h2 ")]),a("span",[e._v("推送的补充工具，而不是将被替代的特性。")])]),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("br")]),e._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("br"),a("span",{attrs:{"data-lake-element":"cursor"}})]),a("p",{staticStyle:{"text-align":"center","font-size":"14px",color:"rgb(38, 38, 38)","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word","line-height":"1.74",margin:"0px"}},[a("span",{attrs:{"data-card-type":"inline","data-lake-card":"image","data-card-value":"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F124615%2F1563443764196-146438fc-e2b5-49a2-aba8-383ac86c4335.png%22%2C%22originWidth%22%3A1008%2C%22originHeight%22%3A379%2C%22name%22%3A%22image.png%22%2C%22size%22%3A235321%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A806.4%2C%22height%22%3A303%7D"}},[a("img",{staticClass:"image lake-drag-image",staticStyle:{width:"778px",height:"292px",border:"none","box-shadow":"none",visibility:"visible"},attrs:{"data-role":"image",src:"https://cdn.nlark.com/yuque/0/2019/png/124615/1563443764196-146438fc-e2b5-49a2-aba8-383ac86c4335.png","data-raw-src":"https://cdn.nlark.com/yuque/0/2019/png/124615/1563443764196-146438fc-e2b5-49a2-aba8-383ac86c4335.png",alt:"image.png",title:"image.png"}})])])])])}),[],!1,null,null,null);t.default=r.exports}}]);