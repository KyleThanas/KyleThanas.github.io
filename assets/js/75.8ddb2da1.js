(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{295:function(e,n,t){"use strict";t.r(n);var i=t(28),a=Object(i.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"customevent"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#customevent"}},[e._v("#")]),e._v(" CustomEvent")]),e._v(" "),t("div",{staticClass:"lake-content-editor-core lake-engine",attrs:{"data-lake-element":"root","data-selection-124615":"%7B%22path%22%3A%5B%5B5%2C0%2C1%2C0%2C3%2C0%2C0%2C0%5D%2C%5B5%2C0%2C1%2C0%2C3%2C0%2C0%2C0%5D%5D%2C%22uuid%22%3A%22124615%22%2C%22active%22%3Atrue%7D"}},[t("h2",{attrs:{id:"开始"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开始"}},[e._v("#")]),e._v(" 开始")]),e._v(" "),t("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[t("br")]),t("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("十分适合做分享功能。")]),t("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[t("br")]),t("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("global.js")]),t("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock",id:"Et0W9"}},[t("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(38, 38, 38)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[t("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[t("div",{staticClass:"language-undefined extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("// 分享首页\nconst shareHomepage = () => {\n const link = `${window.location.origin}/course`\n const shareConfig = {\n   title: '跟小帮规划学财商知识',\n   desc: '经济行情不好？小帮规划带你了解财商知识',\n   link: link,\n   imgUrl: 'https://course-static.xiaobangguihua.com/upload/9898c361-10c9-4b1e-8141-4d84ceae450d.png',\n }\n\n setWeixinShare(shareConfig)\n}\n\n// 分享笔记\nconst shareNote = ({ noteId, uniqueId, productTitle, shareCredits = false }) => {\n const link = `${window.location.origin}/course/note/landing/${uniqueId}/${noteId}?sourceType=h5wxshare`\n const desc = `【小帮规划】${productTitle}精选笔记`\n const shareConfig = {\n   title: '我又完成一条投资笔记，专门分享给你',\n   desc: desc,\n   link: link,\n   imgUrl: 'https://course-static.xiaobangguihua.com/upload/9898c361-10c9-4b1e-8141-4d84ceae450d.png',\n   success: async function() {\n     growingService.pageShare(this.link, this.title)\n     if (shareCredits) {\n       const { score = 0 } = await creditService.shareNote(uniqueId)\n       if (score > 0) {\n         Toast.show(`分享成功 +${score}积分`)\n       }\n     }\n   },\n   complete: function() {\n     GlobalModalShare.hide()\n   },\n }\n\n setWeixinShare(shareConfig)\n}\n\nwindow.addEventListener('xiaobang-wechat-share/homepage', e => {\n shareHomepage(e.detail)\n})\n\nwindow.addEventListener('xiaobang-wechat-share/note', e => {\n shareNote(e.detail)\n}) \n")])])])])])]),t("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[t("br")]),t("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("页面的js")]),t("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock",id:"rh17c"}},[t("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(38, 38, 38)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[t("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[t("div",{staticClass:"language-undefined extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("if (// 判断分享什么) {\n const event = new CustomEvent('xiaobang-wechat-share/note', {\n   detail: {\n   noteId: this.noteId,\n   uniqueId: this.uniqueId,\n   productTitle: this.productTitle,\n   shareCredits: this.showShareButton,\n   },\n })\n   window.dispatchEvent(event)\n} else {\n const event = new CustomEvent('xiaobang-wechat-share/homepage')\n window.dispatchEvent(event)\n} \n")])])])])])]),t("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[t("br")]),t("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[e._v("weixin.js")]),t("div",{attrs:{"data-card-type":"block","data-lake-card":"codeblock",id:"d7QRl"}},[t("div",{staticClass:"lake-codeblock-content",staticStyle:{border:"1px solid rgb(232, 232, 232)","max-width":"750px",color:"rgb(38, 38, 38)",margin:"0px",padding:"0px",background:"rgb(249, 249, 249)"}},[t("div",{staticStyle:{color:"rgb(89, 89, 89)",margin:"0px",padding:"16px",background:"none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0)"}},[t("div",{staticClass:"language-undefined extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("import weixinService from '@@/services/weixin'\nimport { device } from '@@/utils/userAgent'\nimport { getShareImageUrl } from '@@/utils/imageCrop'\nimport growingService from '@@/services/growing'\n\n// 默认微信分享参数\nconst defaultShareConfig = {\n title: '小帮规划',\n desc: '小帮规划',\n link: `${window.location.origin}/course`,\n imgUrl: 'https://oss.xiaobangtouzi.com/[xiaobangzouti]2019-06-19:5d0a0a594a3c5.png',\n success: function() {\n   growingService.pageShare(this.link, this.title)\n },\n}\n\n/**\n* 设置微信分享\n*\n* @param {object} shareConfig 分享参数\n*/\nexport const setWeixinShare = async shareConfig => {\n if (device.isWeixin) {\n   const signature = await weixinService.getWeixinSignature()\n   const config = Object.assign({}, defaultShareConfig, shareConfig)\n   config.imgUrl = getShareImageUrl(config.imgUrl)\n   window.wx.config(signature)\n   window.wx.ready(() => {\n     window.wx.onMenuShareAppMessage(config)\n     window.wx.onMenuShareTimeline(config)\n   })\n }\n}\n\n// 预览图片\nexport const previewImage = (current, imageList) => {\n window.wx.previewImage({\n   current: current, // 当前显示图片的http链接\n   urls: imageList, // 需要预览的图片http链接列表\n })\n}\n\n")])])])])])]),t("p",{staticStyle:{"font-size":"14px",color:"rgb(38, 38, 38)","line-height":"24px","letter-spacing":"0.05em","outline-style":"none","overflow-wrap":"break-word",margin:"0px"}},[t("br")])])])}),[],!1,null,null,null);n.default=a.exports}}]);