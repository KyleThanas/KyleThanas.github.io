<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React çš„ç”Ÿå‘½å‘¨æœŸ | Ant Design 1111</title>
    <meta name="description" content="åŸºäº umi çš„ Ant Design 1111">
    
    
    <link rel="preload" href="/readbook/assets/css/0.styles.d6f0e1c6.css" as="style"><link rel="preload" href="/readbook/assets/js/app.205826b5.js" as="script"><link rel="preload" href="/readbook/assets/js/2.6adc2b3f.js" as="script"><link rel="preload" href="/readbook/assets/js/20.6000349f.js" as="script"><link rel="prefetch" href="/readbook/assets/js/10.1636d440.js"><link rel="prefetch" href="/readbook/assets/js/11.70bf2f3a.js"><link rel="prefetch" href="/readbook/assets/js/12.a107a538.js"><link rel="prefetch" href="/readbook/assets/js/13.33cb767d.js"><link rel="prefetch" href="/readbook/assets/js/14.f9871772.js"><link rel="prefetch" href="/readbook/assets/js/15.a8ea189d.js"><link rel="prefetch" href="/readbook/assets/js/16.288634c2.js"><link rel="prefetch" href="/readbook/assets/js/17.097f1891.js"><link rel="prefetch" href="/readbook/assets/js/18.45ae2ea1.js"><link rel="prefetch" href="/readbook/assets/js/19.8e74b4bc.js"><link rel="prefetch" href="/readbook/assets/js/21.8853e1e1.js"><link rel="prefetch" href="/readbook/assets/js/22.90d3a464.js"><link rel="prefetch" href="/readbook/assets/js/23.fabe9af3.js"><link rel="prefetch" href="/readbook/assets/js/24.af897bcf.js"><link rel="prefetch" href="/readbook/assets/js/25.bc2baf43.js"><link rel="prefetch" href="/readbook/assets/js/26.ec5f48b3.js"><link rel="prefetch" href="/readbook/assets/js/27.284db135.js"><link rel="prefetch" href="/readbook/assets/js/28.8da8020e.js"><link rel="prefetch" href="/readbook/assets/js/29.642ed6af.js"><link rel="prefetch" href="/readbook/assets/js/3.516fd641.js"><link rel="prefetch" href="/readbook/assets/js/30.c42dcde0.js"><link rel="prefetch" href="/readbook/assets/js/31.5bf0ad56.js"><link rel="prefetch" href="/readbook/assets/js/32.28c4b9fc.js"><link rel="prefetch" href="/readbook/assets/js/33.8ba11b1c.js"><link rel="prefetch" href="/readbook/assets/js/34.f1f06cae.js"><link rel="prefetch" href="/readbook/assets/js/4.bb3de599.js"><link rel="prefetch" href="/readbook/assets/js/5.f324cf32.js"><link rel="prefetch" href="/readbook/assets/js/6.713fbf29.js"><link rel="prefetch" href="/readbook/assets/js/7.ea44b13f.js"><link rel="prefetch" href="/readbook/assets/js/8.19cb361c.js"><link rel="prefetch" href="/readbook/assets/js/9.12521701.js">
    <link rel="stylesheet" href="/readbook/assets/css/0.styles.d6f0e1c6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/readbook/" class="home-link router-link-active"><!----> <span class="site-name">Ant Design 1111</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/readbook/intro.html" class="sidebar-link">å‰è¨€</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç¬¬ä¸€ç« : åŸºç¡€çŸ¥è¯†</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/readbook/sc1lvc.html" class="sidebar-link">å‰ç«¯å¼€å‘çš„æ¼”å˜</a></li><li><a href="/readbook/wybhm9.html" class="sidebar-link">åˆå§‹åŒ–é¡¹ç›®</a></li><li><a href="/readbook/fd5af7.html" class="sidebar-link">ç¬¬ä¸€ä¸ªç»„ä»¶</a></li><li><a href="/readbook/agmsgo.html" class="sidebar-link">ä½¿ç”¨ Ant Design ç»„ä»¶</a></li><li><a href="/readbook/goozth.html" class="sidebar-link">å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/readbook/chapter2.html" class="sidebar-heading clickable"><span>ç¬¬äºŒç« : å¸ƒå±€ä¸è·¯ç”±</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/readbook/layout.html" class="sidebar-link">åŸºæœ¬å¸ƒå±€</a></li><li><a href="/readbook/ghalng.html" class="sidebar-link">ä¾§è¾¹å¯¼èˆª</a></li><li><a href="/readbook/ipsba8.html" class="sidebar-link">è·¯ç”±é…ç½®</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/readbook/chapter3.html" class="sidebar-heading clickable"><span>ç¬¬ä¸‰ç« : å°è¯•ç‰›åˆ€</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/readbook/abl3ad.html" class="sidebar-link">ä½¿ç”¨ model</a></li><li><a href="/readbook/dsl8ee.html" class="sidebar-link">æ­å»ºåŸºäº model çš„å¡ç‰‡åˆ—è¡¨é¡µé¢</a></li><li><a href="/readbook/ig6mzb.html" class="sidebar-link">åœ¨ model ä¸­è¯·æ±‚æœåŠ¡ç«¯æ•°æ®</a></li><li><a href="/readbook/kmmq56.html" class="sidebar-link">æ¨¡æ‹ŸæœåŠ¡ç«¯æ•°æ®</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/readbook/chapter4.html" class="sidebar-heading clickable"><span>ç¬¬å››ç« : å¤æ‚é¡µé¢</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/readbook/ndfx96.html" class="sidebar-link">è¡¨æ ¼</a></li><li><a href="/readbook/up1dn3.html" class="sidebar-link">è¡¨å•</a></li><li><a href="/readbook/dk8xsp.html" class="sidebar-link">å›¾è¡¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ç¬¬äº”ç« : è¿›é˜¶åŠŸèƒ½</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/readbook/customized_styles.html" class="sidebar-link">è‡ªå®šä¹‰æ ·å¼</a></li><li><a href="/readbook/wvbsue.html" class="sidebar-link">ä¸Šä¼ ä¸ä¸‹è½½</a></li><li><a href="/readbook/aut0sr.html" class="sidebar-link">å›½é™…åŒ–</a></li><li><a href="/readbook/lifemethods.html" class="active sidebar-link">React çš„ç”Ÿå‘½å‘¨æœŸ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/readbook/auth.html" class="sidebar-link">æƒé™</a></li><li><a href="/readbook/unittest.html" class="sidebar-link">å•å…ƒæµ‹è¯•</a></li><li><a href="/readbook/typescript.html" class="sidebar-link">ä½¿ç”¨ TypeScript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>é™„å½•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/readbook/byllph.html" class="sidebar-link">ä½ éœ€è¦äº†è§£çš„ ES6 è¯­æ³•</a></li><li><a href="/readbook/tydf0a.html" class="sidebar-link">æ·±å…¥ç†è§£ umi</a></li><li><a href="/readbook/about.html" class="sidebar-link">å…³äºæˆ‘ä»¬</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="react-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#react-çš„ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true" class="header-anchor">#</a> React çš„ç”Ÿå‘½å‘¨æœŸ</h1> <p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜:</p> <ul><li>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿä¸ºä»€ä¹ˆè¦æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°?</li> <li>æˆ‘åº”è¯¥ä»€ä¹ˆæ—¶å€™å»è·å–åå°æ•°æ®? ä¸ºä»€ä¹ˆå¾ˆå¤šæ•™ç¨‹éƒ½æ¨èç”¨componentDidMount? ç”¨componentWillMountä¼šæœ‰ä»€ä¹ˆé—®é¢˜?</li> <li>ä¸ºä»€ä¹ˆsetStateå†™åœ¨è¿™é‡Œé€ æˆäº†é‡å¤æ¸²æŸ“å¤šæ¬¡ï¼Ÿ</li> <li>setStateåœ¨è¿™é‡Œå†™åˆé€‚å—ï¼Ÿ</li></ul> <p>è¯»å®Œæœ¬æ–‡å¸Œæœ›ä½ èƒ½å¯¹Reactçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæœ‰ä¸€å®šçš„äº†è§£ï¼Œç¼–å†™Reactä»£ç çš„æ—¶å€™èƒ½å¤Ÿæ›´åŠ å¾—å¿ƒåº”æ‰‹ï¼Œæ³¨æ„æœ¬æ–‡çš„ç”Ÿå‘½å‘¨æœŸè®²çš„ä¸»è¦æ˜¯æµè§ˆå™¨ç«¯æ¸²æŸ“ï¼Œè¿™æ˜¯åç«¯å’Œå…¨æ ˆçš„ä¸»è¦ä½¿ç”¨æ–¹å¼ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“æœ‰äº›ä¸ä¸€æ ·ï¼Œè¯·æ³¨æ„åŒºåˆ†ï¼Œæˆ‘ä»¬ä¼šåœ¨æ–‡ä¸­è¿›è¡Œç®€å•è¯´æ˜ã€‚</p> <p>:::info
Update: æ›´æ–°ä¸ºReact16ç‰ˆæœ¬ï¼ŒReact16ç”±äºå¼‚æ­¥æ¸²æŸ“ç­‰ç‰¹æ€§ä¼šè®©ä¹‹å‰çš„ä¸€äº›æ–¹æ³•å¦‚componentWillMountå˜å¾—ä¸å¤Ÿå®‰å…¨é«˜æ•ˆé€æ­¥åºŸå¼ƒï¼Œè¯¦è§<a href="https://reactjs.org/docs/react-component.html#legacy-lifecycle-methods" target="_blank" rel="noopener noreferrer">Legacy Methods<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
:::</p> <hr> <h3 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true" class="header-anchor">#</a> ç”Ÿå‘½å‘¨æœŸ</h3> <p>å¦‚æœä½ åšè¿‡å®‰å“å¼€å‘æ–¹é¢çš„ç¼–ç¨‹ï¼Œé‚£ä¹ˆä½ åº”è¯¥äº†è§£onCreateï¼ŒonResumeï¼ŒonDestroryç­‰å¸¸è§ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œç”Ÿå‘½å‘¨æœŸå‡½æ•°è¯´ç™½äº†å°±æ˜¯è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªç»„ä»¶çš„å„ä¸ªé˜¶æ®µéƒ½æä¾›ä¸€äº›é’©å­å‡½æ•°æ¥è®©å¼€å‘è€…åœ¨åˆé€‚çš„æ—¶é—´ç‚¹å¯ä»¥ä»‹å…¥å¹¶è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚åˆå§‹åŒ–(onCreate)çš„æ—¶å€™æˆ‘ä»¬åº”è¯¥åˆå§‹åŒ–ç»„ä»¶ç›¸å…³çš„çŠ¶æ€å’Œå˜é‡ï¼Œç»„ä»¶è¦é”€æ¯(onDestrory)æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠä¸€äº›æ•°æ®ç»“æ„é”€æ¯æ‰ä»¥èŠ‚çº¦å†…å­˜ï¼Œé˜²æ­¢åå°ä»»åŠ¡ä¸€ç›´è¿è¡Œã€‚åœ¨javaç±»ä¸­ä¹Ÿå­˜åœ¨ä¸€ä¸ªæœ€å¸¸è§çš„é’©å­å‡½æ•°contructorï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œè°ƒç”¨superæ–¹æ³•åˆå§‹åŒ–çˆ¶ç±»ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™é‡Œåˆå§‹åŒ–å„ç§å˜é‡ã€‚</p> <p>æˆ‘ä»¬å…ˆçœ‹ä¸‹ä¸‹é¢çš„å›¾å»ºç«‹ä¸€ä¸ªReactç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ç›´è§‚è®¤è¯†ï¼Œå›¾ä¸ºReact 16çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ€»çš„æ¥è¯´Reactç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†: <code>è£…è½½æœŸé—´(Mounting)</code> ï¼Œ<code>æ›´æ–°æœŸé—´(Updating)</code> å’Œ<code>å¸è½½æœŸé—´(Unmounting)</code> ï¼ŒReact16å¤šå‡ºæ¥ä¸€ä¸ª<a href="https://reactjs.org/docs/react-component.html#componentdidcatch" target="_blank" rel="noopener noreferrer">componentDidCatch()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> å‡½æ•°ç”¨äºæ•æ‰é”™è¯¯ã€‚çŸ¥é“ä»€ä¹ˆæ—¶å€™å»ä½¿ç”¨å“ªäº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¯¹äºæŒæ¡å’Œç†è§£Reactæ˜¯éå¸¸é‡è¦çš„ï¼Œä½ å¯ä»¥çœ‹åˆ°è¿™äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°æœ‰ä¸€å®šçš„è§„å¾‹ï¼Œæ¯”å¦‚åœ¨æŸä»¶äº‹æƒ…å‘ç”Ÿä¹‹å‰è°ƒç”¨çš„ä¼šç”¨xxxWillxxxï¼Œè€Œåœ¨è¿™ä¹‹åå‘ç”Ÿçš„ä¼šç”¨xxxDidxxxã€‚</p> <p>// å›¾æ¥æºäºç½‘ç»œï¼ˆä¾µåˆ )</p> <p><img src="https://cdn.yuque.com/lark/0/2018/png/5482/1528371738002-2a20482c-f375-45d0-a7e9-3492e2496b0f.png" alt="image.png | left | 747x414"></p> <p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¿™ä¸‰ä¸ªé˜¶æ®µåˆ†åˆ«ä»‹ç»ä¸€ä¸‹å„ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè¯¦ç»†çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°è§£é‡Šå¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£ <a href="https://reactjs.org/docs/react-component.html" target="_blank" rel="noopener noreferrer">React.Component<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p> <hr> <h3 id="è£…è½½æœŸé—´"><a href="#è£…è½½æœŸé—´" aria-hidden="true" class="header-anchor">#</a> è£…è½½æœŸé—´</h3> <p>ç»„ä»¶è¢«å®ä¾‹åŒ–å¹¶æŒ‚è½½åœ¨åˆ°DOMæ ‘è¿™ä¸€è¿‡ç¨‹ç§°ä¸ºè£…è½½ï¼Œåœ¨è£…è½½æœŸè°ƒç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¾æ¬¡ä¸º</p> <ul><li><a href="https://reactjs.org/docs/react-component.html#constructor" target="_blank" rel="noopener noreferrer">constructor()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://reactjs.org/docs/react-component.html#static-getderivedstatefromprops" target="_blank" rel="noopener noreferrer">getDerivedStateFromProps<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>()</li> <li><a href="https://reactjs.org/docs/react-component.html#render" target="_blank" rel="noopener noreferrer">render()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://reactjs.org/docs/react-component.html#componentdidmount" target="_blank" rel="noopener noreferrer">componentDidMount()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <hr> <h4 id="constructor-props"><a href="#constructor-props" aria-hidden="true" class="header-anchor">#</a> constructor(props)</h4> <p>æ„é€ å‡½æ•°ï¼Œç”¨äºåˆå§‹åŒ–è¿™ä¸ªç»„ä»¶çš„ä¸€äº›çŠ¶æ€å’Œæ“ä½œï¼Œå¦‚æœä½ æ˜¯é€šè¿‡ç»§æ‰¿<code>React.Component</code>å­ç±»æ¥åˆ›å»ºReactçš„ç»„ä»¶çš„ï¼Œé‚£ä¹ˆä½ åº”å½“é¦–å…ˆè°ƒç”¨<code>super(props)</code> åˆå§‹åŒ–çˆ¶ç±»ã€‚</p> <p>åœ¨contructorå‡½æ•°ä¸­ï¼Œä½ å¯ä»¥<strong>åˆå§‹åŒ–state</strong>ï¼Œæ¯”å¦‚<code>this.state = {xxx};</code>ï¼Œä¸è¦åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨setState()å‡½æ•°ï¼Œå¼ºè¡Œä½¿ç”¨çš„è¯Reactä¼šæŠ¥é”™ã€‚å…¶æ¬¡ä½ å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­<strong>è¿›è¡Œå‡½æ•°bind</strong>ï¼Œå¦‚:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¸€ä¸ªç¤ºä¾‹contructorå®ç°å¦‚ä¸‹:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
    color<span class="token punctuation">:</span> <span class="token string">'#fff'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœä½ ä¸éœ€è¦åˆå§‹åŒ–çŠ¶æ€ä¹Ÿä¸éœ€è¦ç»‘å®šhandleå‡½æ•°çš„thisï¼Œé‚£ä¹ˆä½ å¯ä»¥ä¸å®ç°constructorå‡½æ•°ï¼Œç”±é»˜è®¤å®ç°ä»£æ›¿ã€‚</p> <hr> <h4 id="å…³äºbindå‡½æ•°çš„è§£é‡Šè¯´æ˜"><a href="#å…³äºbindå‡½æ•°çš„è§£é‡Šè¯´æ˜" aria-hidden="true" class="header-anchor">#</a> å…³äºbindå‡½æ•°çš„è§£é‡Šè¯´æ˜</h4> <p>æ³¨æ„jsçš„thisæŒ‡å‘æ¯”è¾ƒç‰¹æ®Šï¼Œæ¯”å¦‚ä»¥ä¸‹çš„ä¾‹å­ä½œä¸ºonClickå›è°ƒå‡½æ•°ç”±buttonç»„ä»¶å»è°ƒç”¨çš„æ—¶å€™ä¸ä¼šæŠŠç»„ä»¶ç±»çš„ä¸Šä¸‹æ–‡å¸¦è¿‡å»ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'handleClick'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
  <span class="token punctuation">}</span>
 <span class="token operator">...</span>
 <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>click<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre></div><p>è¿™ç§é—®é¢˜æ¨èä¸‰ç§å¯èƒ½çš„è§£å†³æ–¹å¼ï¼Œå…¶æ ¸å¿ƒå‡ä¸ºå°†å‡½æ•°çš„thiså¼ºåˆ¶ç»‘å®šåˆ°ç»„ä»¶ç±»ä¸Š:
1. å°±æ˜¯ä¸Šé¢è¯´çš„åœ¨constructorå‡½æ•°ä¸­æ˜¾ç¤ºè°ƒç”¨bindã€‚
2. åœ¨onClickçš„æ—¶å€™è¿›è¡Œbind: &lt;button onClick = {this.handleClick.bind(this)} &gt;ï¼Œè¿™ç§æ–¹å¼çš„åŠ£åŠ¿æ˜¯æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½éœ€è¦è¿›è¡Œbindï¼Œä¼˜åŠ¿æ˜¯æ–¹ä¾¿ä¼ å‚ï¼Œå¤„ç†å‡½æ•°éœ€è¦ä¼ å‚å¯ä»¥å‚è€ƒReactçš„æ–‡æ¡£ <a href="https://reactjs.org/docs/handling-events.html#passing-arguments-to-event-handlers" target="_blank" rel="noopener noreferrer">Passing Arguments to Event Handlers<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
3. å£°æ˜å‡½æ•°æ—¶ä½¿ç”¨ç®­å¤´åŒ¿åå‡½æ•°ï¼Œç®­å¤´å‡½æ•°ä¼šè‡ªåŠ¨è®¾ç½®thisä¸ºå½“å‰ç±»ã€‚(<strong>ç®€æ´æœ‰æ•ˆï¼Œå¢™è£‚æ¨è</strong>)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'handleClick'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Component</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h4 id="getderivedstatefromprops"><a href="#getderivedstatefromprops" aria-hidden="true" class="header-anchor">#</a> getDerivedStateFromProps()</h4> <p>è¿™ä¸ªå‡½æ•°ä¼šåœ¨renderå‡½æ•°è¢«è°ƒç”¨ä¹‹å‰è°ƒç”¨ï¼ŒåŒ…æ‹¬ç¬¬ä¸€æ¬¡çš„åˆå§‹åŒ–ç»„ä»¶ä»¥åŠåç»­çš„æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œ&lt;span data-type=&quot;color&quot; style=&quot;color:rgb(51, 51, 51)&quot;&gt;&lt;span data-type=&quot;background&quot; style=&quot;background-color:rgb(255, 255, 255)&quot;&gt;æ¯æ¬¡æ¥æ”¶æ–°çš„propsä¹‹åéƒ½ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ä½œä¸ºæ–°çš„stateï¼Œè¿”å›nullåˆ™è¯´æ˜ä¸éœ€è¦æ›´æ–°stateã€‚&lt;/span&gt;&lt;/span&gt;</p> <p>è¯¥æ–¹æ³•ä¸»è¦ç”¨æ¥æ›¿ä»£&lt;span data-type=&quot;color&quot; style=&quot;color:rgb(51, 51, 51)&quot;&gt;&lt;span data-type=&quot;background&quot; style=&quot;background-color:rgb(255, 255, 255)&quot;&gt;componentWillReceivePropsæ–¹æ³•ï¼ŒwillReceivePropsç»å¸¸è¢«è¯¯ç”¨ï¼Œå¯¼è‡´äº†ä¸€äº›é—®é¢˜ï¼Œå› æ­¤åœ¨æ–°ç‰ˆæœ¬ä¸­è¢«æ ‡è®°ä¸ºunsafeã€‚ä»¥&lt;/span&gt;&lt;/span&gt;<a href="https://juejin.im/post/5abf4a09f265da237719899d" target="_blank" rel="noopener noreferrer">æ˜é‡‘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>&lt;span data-type=&quot;color&quot; style=&quot;color:rgb(51, 51, 51)&quot;&gt;&lt;span data-type=&quot;background&quot; style=&quot;background-color:rgb(255, 255, 255)&quot;&gt;ä¸Šçš„ğŸŒ°ä¸ºä¾‹ï¼Œ&lt;/span&gt;&lt;/span&gt;componentWillReceivePropsçš„å¸¸è§ç”¨æ³•å¦‚ä¸‹ï¼Œæ ¹æ®ä¼ è¿›æ¥çš„å±æ€§å€¼åˆ¤æ–­æ˜¯å¦è¦loadæ–°çš„æ•°æ®</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">ExampleComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    isScrollingDown<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>currentRow <span class="token operator">!==</span> nextProps<span class="token punctuation">.</span>currentRow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// æ£€æµ‹åˆ°å˜åŒ–åæ›´æ–°çŠ¶æ€ã€å¹¶è¯·æ±‚æ•°æ®</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        isScrollingDown<span class="token punctuation">:</span> nextProps<span class="token punctuation">.</span>currentRow <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>currentRow<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadAsyncData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">loadAsyncData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½†è¿™ä¸ªæ–¹æ³•çš„ä¸€ä¸ªé—®é¢˜æ˜¯&lt;span data-type=&quot;color&quot; style=&quot;color:rgb(51, 51, 51)&quot;&gt;&lt;span data-type=&quot;background&quot; style=&quot;background-color:rgb(255, 255, 255)&quot;&gt;å¤–éƒ¨ç»„ä»¶å¤šæ¬¡é¢‘ç¹æ›´æ–°ä¼ å…¥å¤šæ¬¡ä¸åŒçš„ propsï¼Œè€Œè¯¥ç»„ä»¶å°†è¿™äº›æ›´æ–° batch åä»…ä»…è§¦å‘å•æ¬¡è‡ªå·±çš„æ›´æ–°ï¼Œè¿™ç§å†™æ³•ä¼šå¯¼è‡´ä¸å¿…è¦çš„å¼‚æ­¥è¯·æ±‚ï¼Œç›¸æ¯”ä¸‹æ¥&lt;/span&gt;&lt;/span&gt;getDerivedStateFromPropsé…åˆcomponentDidUpdateçš„å†™æ³•å¦‚ä¸‹:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">ExampleComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    isScrollingDown<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    lastRow<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">,</span> prevState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¸å†æä¾› prevProps çš„è·å–æ–¹å¼</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>currentRow <span class="token operator">!==</span> prevState<span class="token punctuation">.</span>lastRow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        isScrollingDown<span class="token punctuation">:</span> nextProps<span class="token punctuation">.</span>currentRow <span class="token operator">&gt;</span> prevState<span class="token punctuation">.</span>lastRow<span class="token punctuation">,</span>
        lastRow<span class="token punctuation">:</span> nextProps<span class="token punctuation">.</span>currentRow<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// é»˜è®¤ä¸æ”¹åŠ¨ state</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä»…åœ¨æ›´æ–°è§¦å‘åè¯·æ±‚æ•°æ®</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadAsyncData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">loadAsyncData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™ç§æ–¹å¼åªåœ¨æ›´æ–°è§¦å‘åè¯·æ±‚æ•°æ®ï¼Œç›¸æ¯”ä¸‹æ¥æ›´èŠ‚çœèµ„æºã€‚</p> <blockquote><p>æ³¨æ„&lt;span data-type=&quot;color&quot; style=&quot;color:rgb(51, 51, 51)&quot;&gt;&lt;span data-type=&quot;background&quot; style=&quot;background-color:rgb(255, 255, 255)&quot;&gt;getDerivedStateFromPropsæ˜¯ä¸€ä¸ªstaticæ–¹æ³•ï¼Œæ„å‘³ç€æ‹¿ä¸åˆ°å®ä¾‹çš„this&lt;/span&gt;&lt;/span&gt;</p></blockquote> <hr> <h4 id="render"><a href="#render" aria-hidden="true" class="header-anchor">#</a> render()</h4> <blockquote><p>è¯¥æ–¹æ³•åœ¨ä¸€ä¸ªReactç»„ä»¶ä¸­æ˜¯å¿…é¡»å®ç°çš„ï¼Œä½ å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªjava interfaceçš„æ¥å£</p></blockquote> <p>è¿™æ˜¯Reactç»„ä»¶çš„æ ¸å¿ƒæ–¹æ³•ï¼Œç”¨äºæ ¹æ®çŠ¶æ€stateå’Œå±æ€§propsæ¸²æŸ“ä¸€ä¸ªReactç»„ä»¶ã€‚æˆ‘ä»¬åº”è¯¥ä¿æŒè¯¥æ–¹æ³•çš„çº¯æ´æ€§ï¼Œè¿™ä¼šè®©æˆ‘ä»¬çš„ç»„ä»¶æ›´æ˜“äºç†è§£ï¼Œåªè¦stateå’Œpropsä¸å˜ï¼Œæ¯æ¬¡è°ƒç”¨renderè¿”å›çš„ç»“æœåº”å½“ç›¸åŒï¼Œæ‰€ä»¥è¯·<strong>ä¸è¦åœ¨renderæ–¹æ³•ä¸­æ”¹å˜ç»„ä»¶çŠ¶æ€ï¼Œä¹Ÿä¸è¦åœ¨åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å’Œæµè§ˆå™¨ç›´æ¥äº¤äº’</strong>ã€‚</p> <p>å¦‚æœä½ Reactå¦‚ä½•ä½¿ç”¨renderæ–¹æ³•åŸç†ä¸å¤ªäº†è§£ï¼Œå¯ä»¥é˜…è¯»æ–‡ç« ã€Š<a href="https://lark.alipay.com/afx-es/ffb/react-intro" target="_blank" rel="noopener noreferrer">å½“Reactæ¥æ•²é—¨<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‹ã€‚</p> <hr> <h4 id="componentdidmount"><a href="#componentdidmount" aria-hidden="true" class="header-anchor">#</a> componentDidMount()</h4> <p>componentDidMountæ–¹æ³•ä¼šåœ¨renderæ–¹æ³•ä¹‹åç«‹å³è¢«è°ƒç”¨ï¼Œè¯¥æ–¹æ³•åœ¨æ•´ä¸ªReactç”Ÿå‘½å‘¨æœŸä¸­åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚Reactçš„ç»„ä»¶æ ‘æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œæ­¤æ—¶ä½ å¯ä»¥è®¤ä¸ºè¿™ä¸ªç»„ä»¶ä»¥åŠä»–ä¸‹é¢çš„æ‰€æœ‰å­ç»„ä»¶éƒ½å·²ç»æ¸²æŸ“å®Œäº†ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä½ å¯ä»¥è°ƒç”¨å’ŒçœŸå®DOMç›¸å…³çš„æ“ä½œäº†ã€‚</p> <p>æœ‰äº›ç»„ä»¶çš„å¯åŠ¨å·¥ä½œæ˜¯ä¾èµ– DOM çš„ï¼Œä¾‹å¦‚åŠ¨ç”»çš„å¯åŠ¨ï¼Œè€ŒÂ <code>componentWillMount</code>Â çš„æ—¶å€™ç»„ä»¶è¿˜æ²¡æŒ‚è½½å®Œæˆï¼Œæ‰€ä»¥æ²¡æ³•è¿›è¡Œè¿™äº›å¯åŠ¨å·¥ä½œï¼Œè¿™æ—¶å€™å°±å¯ä»¥æŠŠè¿™äº›æ“ä½œæ”¾åœ¨Â <code>componentDidMount</code>Â å½“ä¸­ã€‚</p> <p>æˆ‘ä»¬æ¨èå¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­<strong>å‘é€å¼‚æ­¥è¯·æ±‚</strong>ï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­è°ƒç”¨setState()è®¾ç½®stateï¼Œç­‰æ•°æ®åˆ°è¾¾åè§¦å‘é‡æ–°æ¸²æŸ“ã€‚ä½†æ³¨æ„å°½é‡<strong>ä¸è¦</strong>åœ¨è¿™ä¸ªå‡½æ•°ä¸­<strong>ç›´æ¥è°ƒç”¨</strong>setState()è®¾ç½®çŠ¶æ€ï¼Œè¿™ä¼šè§¦å‘ä¸€æ¬¡é¢å¤–çš„é‡æ–°æ¸²æŸ“ï¼Œå¯èƒ½é€ æˆæ€§èƒ½é—®é¢˜ã€‚</p> <p>ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•åœ¨componentDidMountåŠ è½½æ•°æ®å¹¶è®¾ç½®çŠ¶æ€:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'componentDidMount'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;https://api.github.com/search/repositories?q=language:java&amp;sort=stars&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// è§¦å‘render</span>
            items<span class="token punctuation">:</span> result<span class="token punctuation">.</span>items
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// this.setState({color: xxx}) // ä¸è¦è¿™æ ·åš</span>
  <span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="æ›´æ–°æœŸé—´"><a href="#æ›´æ–°æœŸé—´" aria-hidden="true" class="header-anchor">#</a> æ›´æ–°æœŸé—´</h3> <p>å½“ç»„ä»¶çš„çŠ¶æ€æˆ–å±æ€§å˜åŒ–æ—¶ä¼šè§¦å‘æ›´æ–°ï¼Œæ›´æ–°è¿‡ç¨‹ä¸­ä¼šä¾æ¬¡è°ƒç”¨ä»¥ä¸‹æ–¹æ³•:</p> <ul><li><a href="https://reactjs.org/docs/react-component.html#static-getderivedstatefromprops" target="_blank" rel="noopener noreferrer">getDerivedStateFromProps()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>  ä¸Šæ–‡å·²æè¿°ï¼Œä¸èµ˜è¿°</li> <li><a href="https://reactjs.org/docs/react-component.html#unsafe_componentwillupdate" target="_blank" rel="noopener noreferrer">componentWillUpdate()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://reactjs.org/docs/react-component.html#render" target="_blank" rel="noopener noreferrer">render()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://reactjs.org/docs/react-component.html#getsnapshotbeforeupdate" target="_blank" rel="noopener noreferrer">getSnapshotBeforeUpdate()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://reactjs.org/docs/react-component.html#componentdidupdate" target="_blank" rel="noopener noreferrer">componentDidUpdate()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <hr> <h4 id="shouldcomponentupdate-nextprops-nextstate"><a href="#shouldcomponentupdate-nextprops-nextstate" aria-hidden="true" class="header-anchor">#</a> shouldComponentUpdate(nextProps, nextState)</h4> <p>ä½ å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•æ¥å‘Šè¯‰Reactæ˜¯å¦è¦è¿›è¡Œä¸‹ä¸€æ¬¡render()ï¼Œé»˜è®¤è¿™ä¸ªå‡½æ•°æ”¾å›trueï¼Œå³æ¯æ¬¡æ›´æ–°çŠ¶æ€å’Œå±æ€§çš„æ—¶å€™éƒ½è¿›è¡Œç»„ä»¶æ›´æ–°ã€‚æ³¨æ„è¿™ä¸ªå‡½æ•°å¦‚æœè¿”å›falseå¹¶ä¸ä¼šå¯¼è‡´å­ç»„ä»¶ä¹Ÿä¸æ›´æ–°ã€‚</p> <p>è¿™ä¸ªé’©å­å‡½æ•°**ä¸€èˆ¬ä¸éœ€è¦å®ç°, **å¦‚æœä½ çš„ç»„ä»¶æ€§èƒ½æ¯”è¾ƒå·®æˆ–è€…æ¸²æŸ“æ¯”è¾ƒè€—æ—¶ï¼Œä½ å¯ä»¥è€ƒè™‘ä½¿<a href="https://reactjs.org/docs/react-api.html#reactpurecomponent" target="_blank" rel="noopener noreferrer">React.PureComponent<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> é‡æ–°å®ç°è¯¥ç»„ä»¶ï¼ŒPureComponenté»˜è®¤å®ç°äº†ä¸€ä¸ªç‰ˆæœ¬çš„shouldComponentUpdateä¼šè¿›è¡Œstateå’Œpropsçš„æ¯”è¾ƒã€‚å½“ç„¶å¦‚æœä½ æœ‰è‡ªä¿¡ï¼Œå¯ä»¥è‡ªå·±å®ç°æ¯”è¾ƒnextPropså’ŒnextStateæ˜¯å¦å‘ç”Ÿäº†æ”¹å˜ã€‚</p> <p>è¯¥å‡½æ•°é€šå¸¸æ˜¯ä¼˜åŒ–æ€§èƒ½çš„ç´§æ€¥å‡ºå£ï¼Œæ˜¯ä¸ªå¤§æ‹›ï¼Œä¸è¦è½»æ˜“ç”¨ï¼Œå¦‚æœè¦ç”¨å¯ä»¥å‚è€ƒ<a href="https://github.com/camsong/blog/issues/3" target="_blank" rel="noopener noreferrer">Immutable è¯¦è§£åŠ React ä¸­å®è·µ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>Â .</p> <hr> <h4 id="getsnapshotbeforeupdate"><a href="#getsnapshotbeforeupdate" aria-hidden="true" class="header-anchor">#</a> getSnapshotBeforeUpdate()</h4> <p>è¯¥æ–¹æ³•çš„è§¦å‘æ—¶é—´ä¸º&lt;span data-type=&quot;color&quot; style=&quot;color:rgb(51, 51, 51)&quot;&gt;&lt;span data-type=&quot;background&quot; style=&quot;background-color:rgb(255, 255, 255)&quot;&gt;updateå‘ç”Ÿçš„æ—¶å€™ï¼Œåœ¨renderä¹‹ådomæ¸²æŸ“ä¹‹å‰&lt;/span&gt;&lt;/span&gt;è¿”å›ä¸€ä¸ªå€¼ï¼Œä½œä¸ºcomponentDidUpdateçš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚&lt;span data-type=&quot;color&quot; style=&quot;color:rgb(26, 26, 26)&quot;&gt;&lt;span data-type=&quot;background&quot; style=&quot;background-color:rgb(255, 255, 255)&quot;&gt;è¯¥å‡½æ•°ä¸ componentDidUpdate ä¸€èµ·ä½¿ç”¨å¯ä»¥å–ä»£ componentWillUpdate çš„æ‰€æœ‰åŠŸèƒ½&lt;/span&gt;&lt;/span&gt;ï¼Œæ¯”å¦‚ä»¥ä¸‹æ˜¯å®˜æ–¹çš„ä¾‹å­:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">ScrollingList</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>listRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getSnapshotBeforeUpdate</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">,</span> prevState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Are we adding new items to the list?</span>
    <span class="token comment">// Capture the scroll position so we can adjust scroll later.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prevProps<span class="token punctuation">.</span>list<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>list<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>listRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
      <span class="token keyword">return</span> list<span class="token punctuation">.</span>scrollHeight <span class="token operator">-</span> list<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">,</span> prevState<span class="token punctuation">,</span> snapshot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If we have a snapshot value, we've just added new items.</span>
    <span class="token comment">// Adjust scroll so these new items don't push the old ones out of view.</span>
    <span class="token comment">// (snapshot here is the value returned from getSnapshotBeforeUpdate)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>snapshot <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>listRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
      list<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> list<span class="token punctuation">.</span>scrollHeight <span class="token operator">-</span> snapshot<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>listRef<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token comment">/* ...contents... */</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h4 id="componentdidupdate-prevprops-prevstate-snapshot"><a href="#componentdidupdate-prevprops-prevstate-snapshot" aria-hidden="true" class="header-anchor">#</a> componentDidUpdate(prevProps, prevState, snapshot)</h4> <p>è¯¥æ–¹æ³•ä¼šåœ¨æ›´æ–°å®Œæˆåè¢«ç«‹å³è°ƒç”¨ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿›è¡Œ<strong>DOMæ“ä½œ</strong>ï¼Œæˆ–è€…**åšä¸€äº›å¼‚æ­¥è°ƒç”¨ã€‚**è¿™ä¸ªå’Œé¦–æ¬¡è£…è½½è¿‡ç¨‹åè°ƒç”¨componentDidMountæ˜¯ç±»ä¼¼çš„ï¼Œä¸ä¸€æ ·çš„æ˜¯ä½ å¯èƒ½éœ€è¦åˆ¤æ–­ä¸‹å±æ€§æ˜¯å¦å˜åŒ–äº†å†å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œå¦‚ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">componentDidUpdate</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ¥è‡ªç½‘ç»œ</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">.</span>myProps <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>myProp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// this.props.myProp has a different value</span>
    <span class="token comment">// we can perform any operations that would </span>
    <span class="token comment">// need the new value and/or cause side-effects </span>
    <span class="token comment">// like AJAX calls with the new value - this.props.myProp</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="å¸è½½æœŸé—´"><a href="#å¸è½½æœŸé—´" aria-hidden="true" class="header-anchor">#</a> å¸è½½æœŸé—´</h3> <p>å¸è½½æœŸé—´æ˜¯æŒ‡ç»„ä»¶è¢«ä»DOMæ ‘ä¸­ç§»é™¤æ—¶ï¼Œè°ƒç”¨çš„ç›¸å…³æ–¹æ³•ä¸º:</p> <ul><li><a href="https://reactjs.org/docs/react-component.html#componentwillunmount" target="_blank" rel="noopener noreferrer">componentWillUnmount()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h4 id="componentwillunmount"><a href="#componentwillunmount" aria-hidden="true" class="header-anchor">#</a> componentWillUnmount()</h4> <p>è¯¥æ–¹æ³•ä¼šåœ¨ç»„ä»¶è¢«å¸è½½ä¹‹å‰è¢«è°ƒç”¨ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­è¿›è¡Œç›¸å…³æ¸…ç†å·¥ä½œï¼Œæ¯”å¦‚åˆ é™¤å®šæ—¶å™¨ã€‚</p> <p>ä¸‹é¢ç»™ä¸ªç¤ºä¾‹ä»£ç :</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'componentWillUnmount'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æ¸…é™¤timer</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timerID1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timerID2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// å…³é—­socket</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>myWebsocket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å–æ¶ˆæ¶ˆæ¯è®¢é˜…...</span>
  <span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="é”™è¯¯æ•è·"><a href="#é”™è¯¯æ•è·" aria-hidden="true" class="header-anchor">#</a> é”™è¯¯æ•è·</h3> <p>React16ä¸­æ–°å¢äº†ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°:</p> <ul><li><a href="https://reactjs.org/docs/react-component.html#componentdidcatch" target="_blank" rel="noopener noreferrer">componentDidCatch()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h4 id="componentdidcatch-error-info"><a href="#componentdidcatch-error-info" aria-hidden="true" class="header-anchor">#</a> componentDidCatch(error, info)</h4> <p>åœ¨reactç»„ä»¶ä¸­å¦‚æœäº§ç”Ÿçš„é”™è¯¯æ²¡æœ‰è¢«è¢«æ•è·ä¼šè¢«æŠ›ç»™ä¸Šå±‚ç»„ä»¶ï¼Œå¦‚æœä¸Šå±‚ä¹Ÿä¸å¤„ç†çš„è¯å°±ä¼šæŠ›åˆ°é¡¶å±‚å¯¼è‡´æµè§ˆå™¨ç™½å±é”™è¯¯ï¼Œåœ¨React16ä¸­æˆ‘ä»¬å¯ä»¥å®ç°è¿™ä¸ªæ–¹æ³•æ¥æ•è·<strong>å­ç»„ä»¶</strong>äº§ç”Ÿçš„é”™è¯¯ï¼Œç„¶ååœ¨çˆ¶ç»„ä»¶ä¸­å¦¥å–„å¤„ç†ï¼Œæ¯”å¦‚æä¸ªå¼¹å±‚é€šçŸ¥ç”¨æˆ·ç½‘é¡µå´©æºƒç­‰ã€‚</p> <p>åœ¨è¿™ä¸ªå‡½æ•°ä¸­è¯·åªè¿›è¡Œé”™è¯¯æ¢å¤ç›¸å…³çš„å¤„ç†ï¼Œä¸è¦åšå…¶ä»–æµç¨‹æ§åˆ¶æ–¹é¢çš„æ“ä½œã€‚æ¯”å¦‚:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">componentDidCatch</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> info<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// from react.org</span>
    <span class="token comment">// Display fallback UI</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> hasError<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// You can also log the error to an error reporting service</span>
    <span class="token function">logErrorToMyService</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="react16ä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å˜åŒ–"><a href="#react16ä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å˜åŒ–" aria-hidden="true" class="header-anchor">#</a> React16ä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å˜åŒ–</h3> <p>componentWillMountï¼ŒcomponentWillUpdate, componentWillReceivePropsç­‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åœ¨ä¸‹ä¸ªä¸»ç‰ˆæœ¬ä¸­ä¼šè¢«åºŸå¼ƒ?</p> <p>æ ¹æ®è¿™ä»½<a href="https://github.com/reactjs/rfcs/blob/master/text/0006-static-lifecycle-methods.md" target="_blank" rel="noopener noreferrer">RFC<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œæ˜¯çš„ï¼Œè¿™äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼Œåœ¨React16ä¸­è¢«é‡å‘½åä¸ºUNSAFE_componentWillMountï¼ŒUNSAFE_componentWillUpdateï¼ŒUNSAFE_componentWillReceivePropsï¼Œè€Œåœ¨æ›´ä¸‹ä¸ªå¤§ç‰ˆæœ¬ä¸­ä»–ä»¬ä¼šè¢«åºŸå¼ƒã€‚è¯¦è§<a href="https://reactjs.org/blog/2018/03/29/react-v-16-3.html" target="_blank" rel="noopener noreferrer"> React 16.3ç‰ˆæœ¬å‘å¸ƒå…¬å‘Š<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p> <hr> <h3 id="æ€»ç»“"><a href="#æ€»ç»“" aria-hidden="true" class="header-anchor">#</a> æ€»ç»“</h3> <p>æ€»ç»“ä¸€ä¸‹ï¼Œä»¥ä¸Šè®²çš„è¿™äº›ç”Ÿå‘½å‘¨æœŸéƒ½æœ‰è‡ªå·±å­˜åœ¨çš„æ„ä¹‰ï¼Œä½†åœ¨Reactä½¿ç”¨è¿‡ç¨‹ä¸­æˆ‘ä»¬æœ€å¸¸ç”¨åˆ°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯å¦‚ä¸‹å‡ ä¸ª:</p> <ul><li><strong>constructor</strong>: åˆå§‹åŒ–çŠ¶æ€ï¼Œè¿›è¡Œå‡½æ•°ç»‘å®š</li> <li><strong>componentDidMount</strong>: è¿›è¡ŒDOMæ“ä½œï¼Œè¿›è¡Œå¼‚æ­¥è°ƒç”¨åˆå§‹åŒ–é¡µé¢</li> <li><strong>componentWillReceiveProps</strong>: æ ¹æ®propsæ›´æ–°çŠ¶æ€</li> <li><strong>componentWillUnmount</strong>: æ¸…ç†ç»„ä»¶å®šæ—¶å™¨ï¼Œç½‘ç»œè¯·æ±‚æˆ–è€…ç›¸å…³è®¢é˜…ç­‰</li></ul> <h3 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " aria-hidden="true" class="header-anchor">#</a> å‚è€ƒæ–‡ç« </h3> <ul><li><a href="http://www.mrfront.com/2016/05/03/react-components-study-states/" target="_blank" rel="noopener noreferrer">http://www.mrfront.com/2016/05/03/react-components-study-states/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/superman66/Front-End-Blog/issues/2" target="_blank" rel="noopener noreferrer">https://github.com/superman66/Front-End-Blog/issues/2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/entry/587de1b32f301e0057a28897" target="_blank" rel="noopener noreferrer">https://juejin.im/entry/587de1b32f301e0057a28897<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/JasonBoy/javascript/tree/master/react" target="_blank" rel="noopener noreferrer">Airbnb React/JSX ç¼–ç è§„èŒƒ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://segmentfault.com/a/1190000013354181" target="_blank" rel="noopener noreferrer">ç†è§£Reactç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://medium.com/@baphemot/understanding-reactjs-component-life-cycle-823a640b3e8d" target="_blank" rel="noopener noreferrer">Understanding Reactâ€Šâ€”â€ŠComponent life-cycle<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://zhuanlan.zhihu.com/p/26027085" target="_blank" rel="noopener noreferrer">React Fiberæ˜¯ä»€ä¹ˆ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://reactjs.org/docs/react-component.html" target="_blank" rel="noopener noreferrer">react component<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/post/5abf4a09f265da237719899d" target="_blank" rel="noopener noreferrer">è®²è®²ä»Šå React å¼‚æ­¥æ¸²æŸ“å¸¦æ¥çš„ç”Ÿå‘½å‘¨æœŸå˜åŒ–<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/readbook/aut0sr.html" class="prev">
          å›½é™…åŒ–
        </a></span> <span class="next"><a href="/readbook/auth.html">
          æƒé™
        </a>
        â†’
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/readbook/assets/js/app.205826b5.js" defer></script><script src="/readbook/assets/js/2.6adc2b3f.js" defer></script><script src="/readbook/assets/js/20.6000349f.js" defer></script>
  </body>
</html>
