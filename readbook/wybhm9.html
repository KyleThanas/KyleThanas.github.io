<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>初始化项目 | Ant Design 1111</title>
    <meta name="description" content="基于 umi 的 Ant Design 1111">
    
    
    <link rel="preload" href="/readbook/assets/css/0.styles.d6f0e1c6.css" as="style"><link rel="preload" href="/readbook/assets/js/app.205826b5.js" as="script"><link rel="preload" href="/readbook/assets/js/2.6adc2b3f.js" as="script"><link rel="preload" href="/readbook/assets/js/30.c42dcde0.js" as="script"><link rel="prefetch" href="/readbook/assets/js/10.1636d440.js"><link rel="prefetch" href="/readbook/assets/js/11.70bf2f3a.js"><link rel="prefetch" href="/readbook/assets/js/12.a107a538.js"><link rel="prefetch" href="/readbook/assets/js/13.33cb767d.js"><link rel="prefetch" href="/readbook/assets/js/14.f9871772.js"><link rel="prefetch" href="/readbook/assets/js/15.a8ea189d.js"><link rel="prefetch" href="/readbook/assets/js/16.288634c2.js"><link rel="prefetch" href="/readbook/assets/js/17.097f1891.js"><link rel="prefetch" href="/readbook/assets/js/18.45ae2ea1.js"><link rel="prefetch" href="/readbook/assets/js/19.8e74b4bc.js"><link rel="prefetch" href="/readbook/assets/js/20.6000349f.js"><link rel="prefetch" href="/readbook/assets/js/21.8853e1e1.js"><link rel="prefetch" href="/readbook/assets/js/22.90d3a464.js"><link rel="prefetch" href="/readbook/assets/js/23.fabe9af3.js"><link rel="prefetch" href="/readbook/assets/js/24.af897bcf.js"><link rel="prefetch" href="/readbook/assets/js/25.bc2baf43.js"><link rel="prefetch" href="/readbook/assets/js/26.ec5f48b3.js"><link rel="prefetch" href="/readbook/assets/js/27.284db135.js"><link rel="prefetch" href="/readbook/assets/js/28.8da8020e.js"><link rel="prefetch" href="/readbook/assets/js/29.642ed6af.js"><link rel="prefetch" href="/readbook/assets/js/3.516fd641.js"><link rel="prefetch" href="/readbook/assets/js/31.5bf0ad56.js"><link rel="prefetch" href="/readbook/assets/js/32.28c4b9fc.js"><link rel="prefetch" href="/readbook/assets/js/33.8ba11b1c.js"><link rel="prefetch" href="/readbook/assets/js/34.f1f06cae.js"><link rel="prefetch" href="/readbook/assets/js/4.bb3de599.js"><link rel="prefetch" href="/readbook/assets/js/5.f324cf32.js"><link rel="prefetch" href="/readbook/assets/js/6.713fbf29.js"><link rel="prefetch" href="/readbook/assets/js/7.ea44b13f.js"><link rel="prefetch" href="/readbook/assets/js/8.19cb361c.js"><link rel="prefetch" href="/readbook/assets/js/9.12521701.js">
    <link rel="stylesheet" href="/readbook/assets/css/0.styles.d6f0e1c6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/readbook/" class="home-link router-link-active"><!----> <span class="site-name">Ant Design 1111</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/readbook/intro.html" class="sidebar-link">前言</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>第一章: 基础知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/readbook/sc1lvc.html" class="sidebar-link">前端开发的演变</a></li><li><a href="/readbook/wybhm9.html" class="active sidebar-link">初始化项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/readbook/wybhm9.html#为什么需要脚手架" class="sidebar-link">为什么需要脚手架</a></li><li class="sidebar-sub-header"><a href="/readbook/wybhm9.html#编译工具" class="sidebar-link">编译工具</a></li><li class="sidebar-sub-header"><a href="/readbook/wybhm9.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/readbook/wybhm9.html#构建和部署" class="sidebar-link">构建和部署</a></li></ul></li><li><a href="/readbook/fd5af7.html" class="sidebar-link">第一个组件</a></li><li><a href="/readbook/agmsgo.html" class="sidebar-link">使用 Ant Design 组件</a></li><li><a href="/readbook/goozth.html" class="sidebar-link">受控组件与非受控组件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/readbook/chapter2.html" class="sidebar-heading clickable"><span>第二章: 布局与路由</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/readbook/layout.html" class="sidebar-link">基本布局</a></li><li><a href="/readbook/ghalng.html" class="sidebar-link">侧边导航</a></li><li><a href="/readbook/ipsba8.html" class="sidebar-link">路由配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/readbook/chapter3.html" class="sidebar-heading clickable"><span>第三章: 小试牛刀</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/readbook/abl3ad.html" class="sidebar-link">使用 model</a></li><li><a href="/readbook/dsl8ee.html" class="sidebar-link">搭建基于 model 的卡片列表页面</a></li><li><a href="/readbook/ig6mzb.html" class="sidebar-link">在 model 中请求服务端数据</a></li><li><a href="/readbook/kmmq56.html" class="sidebar-link">模拟服务端数据</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/readbook/chapter4.html" class="sidebar-heading clickable"><span>第四章: 复杂页面</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/readbook/ndfx96.html" class="sidebar-link">表格</a></li><li><a href="/readbook/up1dn3.html" class="sidebar-link">表单</a></li><li><a href="/readbook/dk8xsp.html" class="sidebar-link">图表</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>第五章: 进阶功能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/readbook/customized_styles.html" class="sidebar-link">自定义样式</a></li><li><a href="/readbook/wvbsue.html" class="sidebar-link">上传与下载</a></li><li><a href="/readbook/aut0sr.html" class="sidebar-link">国际化</a></li><li><a href="/readbook/lifemethods.html" class="sidebar-link">React 的生命周期</a></li><li><a href="/readbook/auth.html" class="sidebar-link">权限</a></li><li><a href="/readbook/unittest.html" class="sidebar-link">单元测试</a></li><li><a href="/readbook/typescript.html" class="sidebar-link">使用 TypeScript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>附录</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/readbook/byllph.html" class="sidebar-link">你需要了解的 ES6 语法</a></li><li><a href="/readbook/tydf0a.html" class="sidebar-link">深入理解 umi</a></li><li><a href="/readbook/about.html" class="sidebar-link">关于我们</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="初始化项目"><a href="#初始化项目" aria-hidden="true" class="header-anchor">#</a> 初始化项目</h1> <p>现在你已经了解了前端开发的基本概念，开始要进入实际项目了。这一节将教会大家如何初始化一个项目，开发出一个可以展示 <code>hello world</code> 的项目。</p> <p>这堂课程中的相关代码你都可以在 <a href="https://github.com/ant-design/react-tutorial" target="_blank" rel="noopener noreferrer">https://github.com/ant-design/react-tutorial<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中拿到，当你无法参考文档完成你自己的代码时你可以以它作为一个参考。不过我们建议你尽可能的自己完成课程相关的代码，如果遇到了问题或者对课程有疑问可以在文档下方留言告知我们。</p> <h2 id="为什么需要脚手架"><a href="#为什么需要脚手架" aria-hidden="true" class="header-anchor">#</a> 为什么需要脚手架</h2> <p>一个普通的网页基本都会包含 HTML，CSS 和 JS 三个关键的元素。这一点多年以来都是没有改变的，但是前端的开发模式已经发生了很大的变化。以往我们写的网页前端代码都是可以通过浏览器打开后能够直接运行的，但是现在对于大部分前端项目来说，我们写的代码其实并不是原生的 JS，HTML 和 CSS，而是基于它们扩展出来的更上层的语法。</p> <p>本课程，我们将会大量编写 React 组件（实际上 antd 就是 Ant Design 的 React 组件的实现），这些组件需要通过编译为最终的 JS 和 CSS，然后引入到 HTML 网页中才能够被浏览器正确地执行。</p> <p>由于存在一个编译过程，这就需要基于编译工具搭建一个项目的脚手架，使得我们可以通过工具实现代码的编译。通过编译后的代码才是浏览器能够执行的代码，这样我们才能进行项目的开发和最终的部署。</p> <h2 id="编译工具"><a href="#编译工具" aria-hidden="true" class="header-anchor">#</a> 编译工具</h2> <p>前端开发不只涉及到 JS，同时还有 CSS、HTML、图片等资源，以及其他一些文件类型。比如：LESS 脚本可以提高 CSS 的编写效率，<a href="typescript">TypeScript</a> 可以让你以一种全新的语法去编写你的逻辑。所有这些文件类型，都被纳入了前端研发体系。大部分编译工具都能够处理这些不同类型的资源文件。</p> <p>开源社区的繁荣，一方面让我们可以有很多工具，但是同时也让项目初始化变得繁琐。</p> <p>本课程选择使用 <a href="https://umijs.org/" target="_blank" rel="noopener noreferrer">umi<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 作为编译工具。其实 umi 不仅仅是一个编译工具，它同时也是一个前端框架。它对社区的 <a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">webpack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，<a href="https://reacttraining.com/react-router/" target="_blank" rel="noopener noreferrer">react-router<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 等进行的封装，使得我们可以基于它快速搭建一个 React 项目。</p> <p>umi 有各种类型的脚手架，方便你快速启动项目。本课程为了让读者能够更好地理解 umi 背后的逻辑，将从零开始初始化一个能够运行的脚手架。</p> <p>下面，请大家跟着一起操作，完成之后将会得到一个最简单的应用：网页显示 <code>hello world</code>。</p> <h2 id="初始化"><a href="#初始化" aria-hidden="true" class="header-anchor">#</a> 初始化</h2> <h3 id="目录结构"><a href="#目录结构" aria-hidden="true" class="header-anchor">#</a> 目录结构</h3> <p>在初始化完成后你将会得到如下的一个目录结构：</p> <pre><code>- antd-course
  - config
    - config.js
  - src
    - page
      - HelloWorld.js
  - package.json
  - .gitignore
  - node_modules
</code></pre> <p>该目录结构只是作为你后面的一个参考，你不必着急创建，只需要按照下面的步骤一步一步操作就可以创建出这最终的结构。</p> <h3 id="开发环境"><a href="#开发环境" aria-hidden="true" class="header-anchor">#</a> 开发环境</h3> <p>首先，请安装 <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">NodeJS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。NodeJS 是一个 JS 执行环境，umi 基于 JS 编写，并且需要在你的开发机上运行，所以依赖于它。</p> <p>安装完成后，执行下面的命令确认是否安装成功。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>node -v
<span class="token function">npm</span> -v
</code></pre></div><blockquote><p>在 umi 中我们采用了一些 NodeJS 的新特性，请确保你的 NodeJS 版本大于等于 <code>8.5.0</code>。</p></blockquote> <p>在国内，你可以安装 <code>cnpm</code> 获得更快速、更安全的包管理体验。使用如下命令安装：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> -g cnpm --registry<span class="token operator">=</span>https://registry.npm.taobao.org
</code></pre></div><p>然后你可以通过如下的命令确认是否成功：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>cnpm -v
</code></pre></div><p>通过 cnpm 你可以很方便的安装和管理一些第三方的包。比如 umi 就将通过它来安装到你的项目。</p> <h3 id="安装-umi-依赖"><a href="#安装-umi-依赖" aria-hidden="true" class="header-anchor">#</a> 安装 umi 依赖</h3> <p>首先，新建一个空的文件夹，用来存放本课程后续所有的代码。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">mkdir</span> antd-course
<span class="token function">cd</span> antd-course
</code></pre></div><p>然后，调用 <code>cnpm init</code> 来初始化 <code>package.json</code>，它是 NodeJS 约定的用来存放项目的信息和配置等信息的文件。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>cnpm init -y
</code></pre></div><p>上面命令中，参数 <code>-y</code> 表示对 npm 要求提供的信息，都自动按下回车键，表示接受默认值。</p> <p>接着，安装 umi 的依赖。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>cnpm <span class="token function">install</span> umi --save-dev
</code></pre></div><p>安装完成之后你会发现 <code>package.json</code> 中多出了一项 <code>devDependencies</code> 的配置。这是由于在上面命令中，参数 <code>--save</code> 可以让依赖信息保存到 <code>package.json</code> 中，这样其它开发者下载代码后就只需要执行 <code>cnpm install</code> 后就会自动安装项目依赖的包。</p> <p>另外项目中还多出了一个 <code>node_modules</code> 的文件夹，它包含了大量的内容。里面存放的是项目依赖的包，umi 的代码也是被下载并安装到其中的。如果你想要了解更多，可以参考 <a href="https://docs.npmjs.com/" target="_blank" rel="noopener noreferrer">npm 的文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h3 id="第一个页面"><a href="#第一个页面" aria-hidden="true" class="header-anchor">#</a> 第一个页面</h3> <p>接下来，让我们创建我们的第一个页面。在创建第一个页面之前，我们需要先初始化 umi 的配置。</p> <p>在 umi 中，大量的使用了配置和约定来帮助你快速开发代码。首先，我们先来创建配置文件。配置文件被约定为 <code>config/config.js</code>。为了让后面的开发更加高效，我们推荐你下载一款适合你的编辑器或者 IDE 来创建和编写代码。本课程中我们推荐你使用 <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">VS Code<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>在 umi 中，你也可以简单的使用 <code>.umirc.js</code> 来作为配置文件。当然它和 <code>config/config.js</code> 是二选一的。更多说明可以参考 umi 的<a href="https://umijs.org/guide/config.html" target="_blank" rel="noopener noreferrer">文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p><code>config/config.js</code> 中初始化的内容如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>一开始它只是 export 了一个默认的空的对象 <code>{}</code>，并没有什么作用，但是在后面我们会用到。</p> <p>我们所说的页面是指由一个独立路由对应的 UI 界面，关于路由你后续可以在<a href="ipsba8">《路由配置》</a>中了解更多。在这一章节中你只需要知道对于这个例子，就是指我们期望通过浏览器访问 <code>/helloworld</code> 的时候可以得到一个显示 <code>hello world</code> 的页面。</p> <p>首先我们新建一个 <code>src</code> 目录，它用来存放项目的除了配置以及单测以外的主要代码。</p> <p>在 umi 中，约定的存放页面代码的文件夹是 <code>pages</code>，是复数，不过如果你喜欢单数的话你配置项中你可以添加 <code>singular</code> 为 <code>true</code> 来让 <code>page</code> 变为约定的文件夹。在本课程中我们使用单数来作为约定目录。所以你需要修改配置文件为：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  singular<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接下来让我们创建第一个页面组件，新建 <code>src/page/HelloWorld.js</code> 文件，代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样第一个页面就创建完成了，代码的具体含义我们会在后面的章节介绍。接下来你就可以通过 umi 来启动你的代码了。首先你需要在 <code>package.json</code> 中的 <code>scripts</code> 里面添加两个命令：</p> <div class="language-diff extra-class"><pre class="language-diff"><code>{
  &quot;scripts&quot;: {
<span class="token inserted">+   &quot;dev&quot;: &quot;umi dev&quot;,</span>
<span class="token inserted">+   &quot;build&quot;: &quot;umi build&quot;</span>
  }
}
</code></pre></div><p><code>scripts</code> 中定义的命令，可以在项目根目录中通过 <code>cnpm run [scriptname]</code> 来运行。接下来请执行：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>cnpm run dev
</code></pre></div><p>修改 <code>package.json</code> 的时候要注意它是一个标准的 JSON 格式的文件，如果失败请检查是不是逗号或者引号的问题。如果顺利，项目将会运行起来。你将会在命令行中看到如下的日志：</p> <p><img src="https://cdn.yuque.com/lark/0/2018/png/46271/1529466155453-49caf373-ae08-4fb9-a0a1-a498455a4be2.png" alt="console"></p> <p>复制日志中的地址，比如 <code>http://localhost:8000/</code>（这里的端口可能会因为被占用或者其他原因而不同，请参考你的机器中实际打印出来的地址）。并在后面加上 <code>helloworld</code> 的路径后（比如 <code>http://localhost:8000/helloworld</code>）在浏览器中打开，然后你将会看到：</p> <p><img src="https://cdn.yuque.com/lark/0/2018/png/46271/1529466372044-33a27264-8160-4cc1-98a5-7fc5f0d0aaef.png" alt="result"></p> <p>在 umi 中，你可以使用约定式的路由，在 <code>page</code> 下面的 JS 文件都会按照文件名映射到一个路由，比如上面这个例子，访问 <code>/helloworld</code> 会对应到 <code>HelloWorld.js</code>。</p> <p>除了约定式的路由，你也可以使用配置式的路由。至于使用哪种路由取决于你的喜好，这不是本课程的重点。在本课程中为了让开发者更好的理解路由组件嵌套，我们会使用配置式的路由。</p> <p>要使用配置式的路由，你需要在配置文件 <code>config/config.js</code> 中添加如下配置：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    component<span class="token punctuation">:</span> <span class="token string">'./HelloWorld'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中 component 是一个字符串，它是相对于 <code>page</code> 目录的相对路径。在上面的配置中我们将路由的路径配置成为了 <code>/</code>，这样你访问 <code>http://localhost:8000/</code> 首页就能看到 <code>hello world</code> 了。</p> <p>当有了 routes 的配置之后 umi 就不会再执行约定式对应的路由逻辑了，而是直接使用你通过配置声明的路由。关于路由的更多信息你可以参考<a href="ipsba8">《路由配置》</a>这一章节的说明。</p> <h3 id="添加-umi-plugin-react-插件"><a href="#添加-umi-plugin-react-插件" aria-hidden="true" class="header-anchor">#</a> 添加 umi-plugin-react 插件</h3> <p>umi 是一个可插拔的企业级 react 应用框架，它的很多功能都是通过插件实现。尤其是 umi 官方的 <a href="https://umijs.org/zh/plugin/umi-plugin-react.html" target="_blank" rel="noopener noreferrer">umi-plugin-react<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这个插件集成了常用的一些进阶的功能，为了后面的课程需要，我们需要添加该插件集到项目中。</p> <p>首先通过 <code>cnpm install umi-plugin-react --save-dev</code> 来安装该插件集。然后在配置文件 <code>config/config.js</code> 中引入该插件：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">'umi-plugin-react'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token comment">// 这里暂时还没有添加配置，该插件还不会有作用，我们会在后面的课程按照需求打开相应的配置</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    component<span class="token punctuation">:</span> <span class="token string">'./HelloWorld'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="gitignore"><a href="#gitignore" aria-hidden="true" class="header-anchor">#</a> .gitignore</h3> <p>cnpm 安装的依赖会被默认安装到项目的 <code>node_modules</code> 目录下。这个目录通常是不需要提交到代码仓库中的。如果你使用的是 git 来作为代码的管理工具，那么你可以添加 <code>.gitignore</code> 文件到项目根目录中，避免将不必要的代码提交到 git 仓库中。</p> <p><code>.gitignore</code> 如下：</p> <pre><code>node_modules
dist
.umi
</code></pre> <p>其中 <code>.umi</code> 是 umi 在开发过程中产生的临时入口文件，便于开发调试，同样也不需要提交到代码仓库中。<code>dist</code> 是构建出来的产物，通常也不需要提交。</p> <p>我们建议你可以在本地通过 git 管理起你的代码，方便在后面的课程中更好的操作你的代码。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">git</span> init
<span class="token function">git</span> add -A
<span class="token function">git</span> commit -m <span class="token string">'init'</span>
</code></pre></div><h2 id="构建和部署"><a href="#构建和部署" aria-hidden="true" class="header-anchor">#</a> 构建和部署</h2> <p>你可以通过 <code>cnpm run build</code> 来构建出最终的产物，执行该命令后会生成最终的 HTML、CSS 和 JS 到 <code>dist</code> 目录下。它们是浏览器可以直接识别并运行的代码，这样你就可以将它们部署到你想要的服务器上了。</p> <p>需要注意的是，如果你直接用浏览器打开 HTML 那是无法正确展示的，因为直接打开无法识别出 HTML 引入的 JS 和 CSS 的路径。你需要确保的的 HTML 在一个 HTTP 的 web 容器中，并保证对应的页面的访问路径正确。比如使用 <a href="https://github.com/zeit/serve" target="_blank" rel="noopener noreferrer">serve<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>cnpm <span class="token function">install</span> serve -g
serve ./dist
</code></pre></div><p>更多关于部署的问题可以查看 umi 的<a href="https://umijs.org/zh/guide/getting-started.html#%E9%83%A8%E7%BD%B2%E5%8F%91%E5%B8%83" target="_blank" rel="noopener noreferrer">部署文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/readbook/sc1lvc.html" class="prev">
          前端开发的演变
        </a></span> <span class="next"><a href="/readbook/fd5af7.html">
          第一个组件
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/readbook/assets/js/app.205826b5.js" defer></script><script src="/readbook/assets/js/2.6adc2b3f.js" defer></script><script src="/readbook/assets/js/30.c42dcde0.js" defer></script>
  </body>
</html>
