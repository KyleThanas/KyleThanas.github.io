(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{235:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"定义样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定义样式","aria-hidden":"true"}},[t._v("#")]),t._v(" 定义样式")]),t._v(" "),a("p",[t._v("在前面的章节中您可能已经了解了如何引入样式，我们这里再温习一遍。")]),t._v(" "),a("p",[t._v("首先让我们制作一个最简单的显示 Hello World 的页面，并附加一些样式。关于怎样用 umi 创建一个最简单的页面，可以参考 "),a("a",{attrs:{href:"https://umijs.org/guide/getting-started.html#%E5%88%9B%E5%BB%BA%E5%BA%94%E7%94%A8",target:"_blank",rel:"noopener noreferrer"}},[t._v("快速上手 | UmiJS"),a("OutboundLink")],1),t._v("。关于目录结构，可以参考 "),a("a",{attrs:{href:"https://umijs.org/guide/app-structure.html#%E5%A4%8D%E6%9D%82%E5%BA%94%E7%94%A8",target:"_blank",rel:"noopener noreferrer"}},[t._v("目录约定 | UmiJS"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.yuque.com/lark/0/2018/png/58329/1531883056317-949f8612-824b-446a-899f-f6bf6f0f9e2c.png",alt:"image.png | left | 683x530"}})]),t._v(" "),a("p",[t._v("我们的目标是：添加一些样式定义，使得 Hello World 文字更粗更大，变为绿色。")]),t._v(" "),a("p",[t._v("第一，在 src/pages 目录下创建页面 "),a("code",[t._v("index.jsx")]),t._v(" 和样式文件 "),a("code",[t._v("styles.css")]),t._v(" 。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(".")]),t._v("\n└── src\n    └── pages\n        ├── index.jsx\n        └── styles.css\n")])])]),a("p",[t._v("写入以下内容到文件")]),t._v(" "),a("div",{staticClass:"language-jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* index.jsx */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("myStyles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("Hello World")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* styles.css */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".hello")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 32px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-weight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bold"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #30b767"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 绿色 */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[a("strong",[t._v("注意：")]),t._v(" 对于 css 文件，")]),t._v(" "),a("ul",[a("li",[t._v("不要在值上使用引号；")]),t._v(" "),a("li",[a("code",[t._v(".")]),t._v("号要紧跟 hello，定义一个 class 选择器。")])])]),t._v(" "),a("p",[t._v("下面展示了错误的写法。")]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 错误！1. 引号是无效的；2. hello 前面的点漏掉了 */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("hello")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'32px'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-weight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bold'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#30b767"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("第二，要把样式文件在页面文件中引用，它才能真正生效。首先添加一行 import 语句；其次在 div 的 className 属性中使用 hello。")]),t._v(" "),a("div",{staticClass:"language-jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" myStyles "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./styles.css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("myStyles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("Hello World")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("blockquote",[a("p",[a("strong",[t._v("注意：")])]),t._v(" "),a("ul",[a("li",[t._v("在 React 的语境下，我们使用 "),a("code",[t._v("className")]),t._v("  保留字来定义一个 html 元素的 class，而非 w3c 标准中的 "),a("code",[t._v("class")]),t._v(" 保留字。")]),t._v(" "),a("li",[t._v("在 umi 中我们默认开启了 "),a("em",[t._v("CSS modules")]),t._v(" 特性，这使得 class 名需要通过变量属性去引用。")])])]),t._v(" "),a("p",[t._v("在终端中运行 "),a("code",[t._v("umi dev")]),t._v(" 启动我们的应用。看到了期待中 Hello World 渲染出的样子。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.yuque.com/lark/0/2018/png/58329/1531883069473-eb9391c0-4684-4566-bdcb-840d392bcc2d.png",alt:"image.png | left | 683x512"}})]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("注意：")])]),t._v(" "),a("ul",[a("li",[t._v("如果没有预期效果，请检查是否在终端有报错，请打开浏览器的控制台看是否有相关报错。")]),t._v(" "),a("li",[t._v("如果依然有问题，请检查是否正在使用某些网络工具，或者曾经不慎修改了 /etc/hosts 文件。")])])]),t._v(" "),a("p",[t._v("因为默认开启了 "),a("em",[t._v("CSS modules")]),t._v(" 特性，这份样式定义"),a("strong",[t._v("只会")]),t._v("对 index.html 文件起作用，所以我们不用再担心不同样式文件之间的干扰。在下一节中，我们将详细地介绍 CSS modules。")]),t._v(" "),a("h2",{attrs:{id:"理解-css-modules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理解-css-modules","aria-hidden":"true"}},[t._v("#")]),t._v(" 理解 CSS modules")]),t._v(" "),a("p",[t._v("让我们打开浏览器的调试工具（这里以 Chrome DevTool 为例子）。切到 Elements 面板，找到 Hello World。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.yuque.com/lark/0/2018/png/58329/1531883088174-8d34a289-bd94-4166-9d1b-b248492ae5e7.png",alt:"image.png | left | 683x663"}})]),t._v(" "),a("p",[t._v("我们看到它实际的 class 是 "),a("code",[t._v("style__hello__<hash数值>")]),t._v("，并非在源文件中声明的 "),a("code",[t._v("hello")]),t._v("。这就是 CSS modules 起了作用。这个 hash 值是全局唯一的，比如通过文件路径来获得，这样 class 名称就做到了全局唯一。通过全局唯一的 CSS 命名，我们变相地获得了局部作用域的 CSS（scoped CSS）。如果一个 CSS 文件仅仅是作用在某个局部的话，我们称这样一个 CSS 文件为 "),a("em",[t._v("CSS module")]),t._v("。")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/css-modules/css-modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS modules"),a("OutboundLink")],1),t._v(" 不是一个可以安装的 npm 包，也不是 w3c 中的某个标准，只是一项流行的社区规范（an opinionated proposal）。webpack browserify 等打包工具（module bundler）的能力让工具生成局部 CSS 成为可能，CSS modules 规范也应运而生。")]),t._v(" "),a("p",[t._v("CSS 的局部作用域解决了大问题。在w3c 规范中，CSS 始终是「全局的」。在传统的 web 开发中，最为头痛的莫过于处理 CSS 问题。因为全局性，明明定义了样式，但就是不生效，原因可能是被其他样式定义所强制覆盖。接手老项目更是噩梦，改对了一个地方的样式，却把另外许多地方的样式打乱。这一切的罪魁祸首就是 CSS 的「全局型」。为了得到局部作用域，社区曾经流行过叫做 BEM 的方案，它 "),a("em",[t._v("约定")]),t._v(" class 应该写成：")]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".block-name__element-name--modifier-name")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("但这终究只是一种书写 class 的命名规范（convention），可以因为疏忽被打破，每个团队之间的规范也不一定互通。CSS modules 是从工具层面给出的一套生成局部 CSS 的规范，本质还是生成全局唯一的 CSS 定义。webpack 实现了这套规范。umi 依赖 webpack，默认开启了 CSS modules 特性。")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("webpack 实现 CSS module 的原理")])]),t._v(" "),a("p",[t._v("在现代 web 开发中，服务器并不能直接使用我们写的 JS CSS HMTL 文件。事实上，我们按照规范写出代码，输入给编译工具 (transpiler) ，它最终把代码转换/打包，输出成浏览器可以使用的 JS CSS HTML。在多年的社区沉淀后，脱颖而出的是诸如 webpack 这样的工具，这类编译工具又称为 module bundler。webpack 允许我们用 import/export (ES6) 或者 require/module.exports (CommonJs) 这样的语法来书写我们的 JS 代码，它甚至允许我们在 js 里面 import 一个 CSS 文件。注意：如果脱离了 webpack 的语境，这么写当然是会引起语法错误的。")]),t._v(" "),a("p",[t._v("在现代 web 开发中，"),a("strong",[t._v("我们的运行时代码强耦合了编译时工具")]),t._v("，强耦合换来的是传统 web 开发所不可企及的新能力。对于 webpack，当我们每次写了 import A from B 的时候，我们其实是声明了一个A 对于 B 的依赖。当在 a.js 中写入 "),a("code",[t._v("import styles from a.css")]),t._v(" 后，webpack 就可以把这个依赖翻译成：每当 a.js 被使用时，保证生成一个 style 标签，里面嵌入 a.css 的内容。同时 webpack 给予我们另一个能力：不同类型文件间可以信息传递。webpack 把 a.css 中的类名根据"),a("a",{attrs:{href:"https://github.com/webpack-contrib/css-loader#localidentname",target:"_blank",rel:"noopener noreferrer"}},[t._v("规则"),a("OutboundLink")],1),t._v("编译成为全局唯一的字符串，传递给 a.js 使用，于是手工维持的命名规则就可以自动生成。")])]),t._v(" "),a("p",[a("strong",[t._v("注意：很多 CSS 选择器是不会被 CSS Modules 处理的，比如 body、div 、a 这样的 HTML 标签名就不会。我们推荐如果要定义局部 css 样式/动画， 只使用 class 或 @keyframe。")])]),t._v(" "),a("h2",{attrs:{id:"css-modules-与-less-语法一起使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css-modules-与-less-语法一起使用","aria-hidden":"true"}},[t._v("#")]),t._v(" CSS modules 与 Less 语法一起使用")]),t._v(" "),a("p",[t._v("虽然被称作 "),a("em",[t._v("CSS")]),t._v(" modules，但是它完全可以和 Less 一起无缝使用，与使用普通 CSS 没有什么区别，只需要使用 Less 的语法写样式就可以了。鉴于 antd 的样式也使用了 Less 作为开发语言。所以我们的实战教程强烈推荐 CSS module 和 Less 文件一起使用。")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("Less 介绍")])]),t._v(" "),a("p",[a("a",{attrs:{href:"http://lesscss.org/usage/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Less"),a("OutboundLink")],1),t._v(" 是一个 CSS 的超集，Less 允许我们定义变量，使用嵌套式声明，定义函数等。严格说 Less 包含两部分：1. Less 的语法。2. Less 预处理器（Less preprocessor）。浏览器终究只认识 CSS，所以 Less 文件需要经过 Less 预处理器编译成为 CSS。")]),t._v(" "),a("p",[t._v("在工具的支持下，一个 Less 文件首先会经过 CSS modules 的编译，把类名全局唯一化，然后才被 Less preprocessor 编译成为 CSS 文件。正因此，Less 文件可以和 CSS modules 无缝联合使用。")])]),t._v(" "),a("p",[t._v("第一，我们建立一个新页面 css-modules-with-less，并且使用 less 文件作为样式文件。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(".")]),t._v("\n└── src\n    └── pages\n        ├── css-modules-with-less\n        │   ├── index.jsx\n        │   └── styles.less\n        ├── index.jsx\n        └── styles.css\n")])])]),a("p",[t._v("第二，我们定义 less 文件，故意添加一些非 css 语法，比如嵌套、变量定义。")]),t._v(" "),a("div",{staticClass:"language-less extra-class"},[a("pre",{pre:!0,attrs:{class:"language-less"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@grey-color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rgba")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" .25"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".hello")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 32px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-weight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bold"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #30b767"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".deleted")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("text-decoration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" line"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("through"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@grey-color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("第三，我们创建页面，并使用这份样式。")]),t._v(" "),a("div",{staticClass:"language-jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" styles "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./styles.less'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("styles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("styles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deleted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("Hello World")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n    ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("页面效果如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.yuque.com/lark/0/2018/png/58329/1531883542967-53767b93-7213-45f3-8698-a53c7d474b29.png",alt:"image.png | left | 640x480"}})]),t._v(" "),a("p",[t._v("DevTools 里可以看到 less 文件被正确地编译了，并且也经过 CSS modules 处理。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.yuque.com/lark/0/2018/png/58329/1531883548762-e70af093-ff3e-4e41-bcb4-5b6bb45692af.png",alt:"image.png | left | 555x643"}})]),t._v(" "),a("h2",{attrs:{id:"在-css-modules-中覆盖-antd-样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-css-modules-中覆盖-antd-样式","aria-hidden":"true"}},[t._v("#")]),t._v(" 在 CSS modules 中覆盖 antd 样式")]),t._v(" "),a("p",[t._v("全局唯一带来的特性就是样式不会被覆盖，但是我们有时就是想做样式覆盖。比如我们引用了 antd 的 Button 组件，我们想要覆盖它的一些样式属性定义。通过观察，我们知道 Button 组件中声明了 "),a("code",[t._v(".ant-btn")]),t._v(" 类用来做样式定义，我们就从它入手。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.yuque.com/lark/0/2018/png/58329/1531883121847-e1889509-7031-433f-bdd7-819cb7cfda85.png",alt:"image.png | left | 683x714"}})]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("小技巧：")]),t._v("\n使用 DevTools 的元素选择器再配合 styles 面板，可以用来了解 antd 中使用的样式名称。")])]),t._v(" "),a("p",[t._v("比如我们想要覆盖掉 "),a("code",[t._v(".ant-btn")]),t._v(" 中声明的 "),a("code",[t._v("border-radius")]),t._v(" 属性，来绘制圆角按钮。直观的想法是：")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 在 css/less 文件中定义覆盖 --\x3e")]),t._v("\n.override-ant-btn .ant-btn {\n    border-radius: 16px;\n}\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 在 html 中使用对应的 class 名称 --\x3e")]),t._v("\n<span className={styles['override-ant-btn']}>\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("加入圆角的按钮"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("但其实是没效果的。由于 CSS modules 的使用， "),a("code",[t._v("ant-btn")]),t._v(" 会被改名：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.yuque.com/lark/0/2018/png/58329/1531883141110-31e72cd1-d5f8-479e-8d8c-fd51e309f44b.png",alt:"image.png | left | 531x472"}})]),t._v(" "),a("p",[t._v("从而无法引用到 "),a("code",[t._v("ant-btn")]),t._v(" 原名。")]),t._v(" "),a("p",[t._v("此时 CSS modules 的 "),a("a",{attrs:{href:"https://github.com/css-modules/css-modules#exceptions",target:"_blank",rel:"noopener noreferrer"}},[t._v("global 语法"),a("OutboundLink")],1),t._v(" 派上了用场。它允许我们声明一个 class 名称不可被改写。语法很简单：")]),t._v(" "),a("pre",[a("code",[t._v(":global(.ant-btn) {\n  // ...\n}\n")])]),t._v(" "),a("p",[t._v("于是 "),a("code",[t._v(".ant-btn")]),t._v(" 就不会被改写了。这里我们举一个实用的例子，来具体展示使用 global 覆盖 antd Button 组件的样式。")]),t._v(" "),a("p",[t._v("第一，我们建立一个新页面 css-modules-with-antd。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(".")]),t._v("\n└── src\n    └── pages\n        ├── css-modules-with-antd\n        │   ├── index.jsx\n        │   └── styles.less\n        ├── css-modules-with-less\n        │   ├── index.jsx\n        │   └── styles.less\n        ├── index.jsx\n        └── styles.css\n")])])]),a("p",[t._v("第二，我们建立页面文件，包含两个 antd Button，其中一个需要被样式覆盖，一个不需要。")]),t._v(" "),a("div",{staticClass:"language-jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" styles "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./styles.less'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Button "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'antd'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("styles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'override-ant-btn'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n          ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("圆角样式按妞")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("antd 原始按钮")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n    ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("第三，我们建立样式文件覆盖 antd 原生样式，用 global 来声明不修改 class 名。")]),t._v(" "),a("pre",[a("code",[t._v(".override-ant-btn {\n  :global(.ant-btn) {\n    border-radius: 16px;\n  }\n}\n")])]),t._v(" "),a("p",[t._v("于是看到覆盖的效果。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.yuque.com/lark/0/2018/png/58329/1531883150954-b2429b96-a3da-4439-800d-2d620d921f16.png",alt:"image.png | left | 640x480"}})]),t._v(" "),a("p",[t._v("最后强调，global 不应该被滥用，特别地我们建议：若想在某个文件中覆盖 antd 样式，请加上一个类似 "),a("code",[t._v(".override-ant-btn")]),t._v(" 的类包裹住 global 修饰的名称，以避免全局样式声明分散在项目各处。")]),t._v(" "),a("h2",{attrs:{id:"更换-antd-主题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更换-antd-主题","aria-hidden":"true"}},[t._v("#")]),t._v(" 更换 antd 主题")]),t._v(" "),a("p",[t._v("前面章节我们讲过如何覆盖某个页面中 antd 的样式，有时候我们想要「批量修改」 antd 的样式，这就需要利用 less 提供的一个能力："),a("em",[t._v("modifyVars")]),t._v("。简单地讲，antd 在使用 less 定义样式时，使用了大量的变量声明。这些变量的定义在编译期是可以被工具识别并修改的。")]),t._v(" "),a("p",[t._v("如果使用的是 umi ，这个过程相当简单，只需要简单地修改配置文件即可。")]),t._v(" "),a("p",[t._v("第一，找到 umi 的"),a("a",{attrs:{href:"https://umijs.org/guide/config.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置文件"),a("OutboundLink")],1),t._v("，如果不存在则创建一个。注意配置文件放置的"),a("a",{attrs:{href:"https://umijs.org/guide/app-structure.html#%E5%A4%8D%E6%9D%82%E5%BA%94%E7%94%A8",target:"_blank",rel:"noopener noreferrer"}},[t._v("位置"),a("OutboundLink")],1),t._v("。我们这里使用 "),a("code",[t._v(".umirc.js")]),t._v(" 。")]),t._v(" "),a("pre",[a("code",[t._v("├── .gitignore\n├── .umirc.js\n└── src\n    ├── global.less\n    └── pages\n        ├── .umi\n        │   ├── router.js\n        │   └── umi.js\n        ├── css-modules-with-antd\n        │   ├── index.jsx\n        │   └── styles.less\n        ├── css-modules-with-less\n        │   ├── index.jsx\n        │   └── styles.less\n        ├── index.jsx\n        └── styles.css\n")])]),t._v(" "),a("p",[t._v("第二，把之前创建的 "),a("code",[t._v("css-modules-with-antd")]),t._v("  页面中的 Button 加上 "),a("code",[t._v("type=“primary”")]),t._v(" 定义。当 type 值为 “primary” 时，Button 应该显示为蓝色按钮。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    <span className={styles['override-ant-btn']}>\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("primary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("圆角样式按妞"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("primary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("antd 原始按钮"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"https://cdn.yuque.com/lark/0/2018/png/58329/1531883160791-2a10d1ef-d883-4076-9a9f-d5f69a084d80.png",alt:"image.png | left | 640x480"}})]),t._v(" "),a("p",[t._v("第三，配置 umi 主题（实质是 modifyVars 机制）。如果是创建新文件，则写入：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  theme"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@primary-color"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#30b767"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("如果是已存在配置文件，则把 "),a("code",[t._v("theme")]),t._v(" 这一段嵌入到 export default 内部。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 若已有配置")]),t._v("\n  outputPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./build"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加入 theme 定义")]),t._v("\n  theme"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@primary-color"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#30b767"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 绿色")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("在 antd Button 定义时，颜色并不是写死的，而是使用了 Less 变量。我们看到修改变量后，按钮的颜色变为了绿色。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.yuque.com/lark/0/2018/png/58329/1531883168104-3d65ce25-35df-4a3f-8642-bb70520193ff.png",alt:"image.png | left | 640x480"}})]),t._v(" "),a("p",[t._v("想要知道 antd 都定义了哪些变量，可以参考"),a("a",{attrs:{href:"https://github.com/ant-design/ant-design/blob/master/components/style/themes/default.less",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"更改全局样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更改全局样式","aria-hidden":"true"}},[t._v("#")]),t._v(" 更改全局样式")]),t._v(" "),a("p",[t._v("如果使用 umi 的话，有一个"),a("a",{attrs:{href:"https://umijs.org/guide/app-structure.html#%E5%A4%8D%E6%9D%82%E5%BA%94%E7%94%A8",target:"_blank",rel:"noopener noreferrer"}},[t._v("专门的文件"),a("OutboundLink")],1),t._v(" "),a("code",[t._v("global.less")]),t._v(" 来让我们书写全局样式。这个文件并不会被 CSS modules 处理。")]),t._v(" "),a("pre",[a("code",[t._v(".\n└── src\n    ├── global.less\n    └── pages\n        ├── css-modules-with-antd\n        │   ├── index.jsx\n        │   └── styles.less\n        ├── css-modules-with-less\n        │   ├── index.jsx\n        │   └── styles.less\n        ├── index.jsx\n        └── styles.css\n")])]),t._v(" "),a("p",[t._v("一个用途是全局性地定义 HTML 标签的样式，比如写入：")]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("p")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("如果此时去往 "),a("code",[t._v("css-modules-with-antd")]),t._v(" 会发现上下两个按钮贴在一起了。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.yuque.com/lark/0/2018/png/58329/1531883177136-ed18f241-d8ff-444f-a743-c0077fc6d483.png",alt:"image.png | left | 640x480"}})]),t._v(" "),a("p",[t._v("原因是在大多数浏览器中，默认 p 元素是有 "),a("code",[t._v("1em")]),t._v(" 高度的 "),a("code",[t._v("margin-bottom")]),t._v("。而我们的定义覆盖了默认的样式。")]),t._v(" "),a("p",[t._v("另外一个用途是全局性地覆盖第三方库的样式，比如 antd 中的样式 。")]),t._v(" "),a("p",[t._v("我们全局覆盖 "),a("code",[t._v("ant-btn")]),t._v(" 的样式，增加下面的定义：")]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".ant-btn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("box-shadow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0 3px 7px "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rgba")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0, 0, 0, .5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("可以看到我们成功地添加了按钮阴影")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.yuque.com/lark/0/2018/png/58329/1531883186174-29290847-8102-4984-ac14-8a2fd58b5926.png",alt:"image.png | left | 640x480"}})])])},[],!1,null,null,null);s.default=e.exports}}]);