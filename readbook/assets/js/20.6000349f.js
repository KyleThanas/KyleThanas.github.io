(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{230:function(t,a,s){"use strict";s.r(a);var n=s(2),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"react-çš„ç”Ÿå‘½å‘¨æœŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-çš„ç”Ÿå‘½å‘¨æœŸ","aria-hidden":"true"}},[t._v("#")]),t._v(" React çš„ç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),s("p",[t._v("ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜:")]),t._v(" "),s("ul",[s("li",[t._v("ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿä¸ºä»€ä¹ˆè¦æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°?")]),t._v(" "),s("li",[t._v("æˆ‘åº”è¯¥ä»€ä¹ˆæ—¶å€™å»è·å–åå°æ•°æ®? ä¸ºä»€ä¹ˆå¾ˆå¤šæ•™ç¨‹éƒ½æ¨èç”¨componentDidMount? ç”¨componentWillMountä¼šæœ‰ä»€ä¹ˆé—®é¢˜?")]),t._v(" "),s("li",[t._v("ä¸ºä»€ä¹ˆsetStateå†™åœ¨è¿™é‡Œé€ æˆäº†é‡å¤æ¸²æŸ“å¤šæ¬¡ï¼Ÿ")]),t._v(" "),s("li",[t._v("setStateåœ¨è¿™é‡Œå†™åˆé€‚å—ï¼Ÿ")])]),t._v(" "),s("p",[t._v("è¯»å®Œæœ¬æ–‡å¸Œæœ›ä½ èƒ½å¯¹Reactçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæœ‰ä¸€å®šçš„äº†è§£ï¼Œç¼–å†™Reactä»£ç çš„æ—¶å€™èƒ½å¤Ÿæ›´åŠ å¾—å¿ƒåº”æ‰‹ï¼Œæ³¨æ„æœ¬æ–‡çš„ç”Ÿå‘½å‘¨æœŸè®²çš„ä¸»è¦æ˜¯æµè§ˆå™¨ç«¯æ¸²æŸ“ï¼Œè¿™æ˜¯åç«¯å’Œå…¨æ ˆçš„ä¸»è¦ä½¿ç”¨æ–¹å¼ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“æœ‰äº›ä¸ä¸€æ ·ï¼Œè¯·æ³¨æ„åŒºåˆ†ï¼Œæˆ‘ä»¬ä¼šåœ¨æ–‡ä¸­è¿›è¡Œç®€å•è¯´æ˜ã€‚")]),t._v(" "),s("p",[t._v(":::info\nUpdate: æ›´æ–°ä¸ºReact16ç‰ˆæœ¬ï¼ŒReact16ç”±äºå¼‚æ­¥æ¸²æŸ“ç­‰ç‰¹æ€§ä¼šè®©ä¹‹å‰çš„ä¸€äº›æ–¹æ³•å¦‚componentWillMountå˜å¾—ä¸å¤Ÿå®‰å…¨é«˜æ•ˆé€æ­¥åºŸå¼ƒï¼Œè¯¦è§"),s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#legacy-lifecycle-methods",target:"_blank",rel:"noopener noreferrer"}},[t._v("Legacy Methods"),s("OutboundLink")],1),t._v("\n:::")]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"ç”Ÿå‘½å‘¨æœŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”Ÿå‘½å‘¨æœŸ","aria-hidden":"true"}},[t._v("#")]),t._v(" ç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),s("p",[t._v("å¦‚æœä½ åšè¿‡å®‰å“å¼€å‘æ–¹é¢çš„ç¼–ç¨‹ï¼Œé‚£ä¹ˆä½ åº”è¯¥äº†è§£onCreateï¼ŒonResumeï¼ŒonDestroryç­‰å¸¸è§ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œç”Ÿå‘½å‘¨æœŸå‡½æ•°è¯´ç™½äº†å°±æ˜¯è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªç»„ä»¶çš„å„ä¸ªé˜¶æ®µéƒ½æä¾›ä¸€äº›é’©å­å‡½æ•°æ¥è®©å¼€å‘è€…åœ¨åˆé€‚çš„æ—¶é—´ç‚¹å¯ä»¥ä»‹å…¥å¹¶è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚åˆå§‹åŒ–(onCreate)çš„æ—¶å€™æˆ‘ä»¬åº”è¯¥åˆå§‹åŒ–ç»„ä»¶ç›¸å…³çš„çŠ¶æ€å’Œå˜é‡ï¼Œç»„ä»¶è¦é”€æ¯(onDestrory)æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠä¸€äº›æ•°æ®ç»“æ„é”€æ¯æ‰ä»¥èŠ‚çº¦å†…å­˜ï¼Œé˜²æ­¢åå°ä»»åŠ¡ä¸€ç›´è¿è¡Œã€‚åœ¨javaç±»ä¸­ä¹Ÿå­˜åœ¨ä¸€ä¸ªæœ€å¸¸è§çš„é’©å­å‡½æ•°contructorï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œè°ƒç”¨superæ–¹æ³•åˆå§‹åŒ–çˆ¶ç±»ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™é‡Œåˆå§‹åŒ–å„ç§å˜é‡ã€‚")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬å…ˆçœ‹ä¸‹ä¸‹é¢çš„å›¾å»ºç«‹ä¸€ä¸ªReactç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ç›´è§‚è®¤è¯†ï¼Œå›¾ä¸ºReact 16çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ€»çš„æ¥è¯´Reactç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†: "),s("code",[t._v("è£…è½½æœŸé—´(Mounting)")]),t._v(" ï¼Œ"),s("code",[t._v("æ›´æ–°æœŸé—´(Updating)")]),t._v(" å’Œ"),s("code",[t._v("å¸è½½æœŸé—´(Unmounting)")]),t._v(" ï¼ŒReact16å¤šå‡ºæ¥ä¸€ä¸ª"),s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#componentdidcatch",target:"_blank",rel:"noopener noreferrer"}},[t._v("componentDidCatch()"),s("OutboundLink")],1),t._v(" å‡½æ•°ç”¨äºæ•æ‰é”™è¯¯ã€‚çŸ¥é“ä»€ä¹ˆæ—¶å€™å»ä½¿ç”¨å“ªäº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¯¹äºæŒæ¡å’Œç†è§£Reactæ˜¯éå¸¸é‡è¦çš„ï¼Œä½ å¯ä»¥çœ‹åˆ°è¿™äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°æœ‰ä¸€å®šçš„è§„å¾‹ï¼Œæ¯”å¦‚åœ¨æŸä»¶äº‹æƒ…å‘ç”Ÿä¹‹å‰è°ƒç”¨çš„ä¼šç”¨xxxWillxxxï¼Œè€Œåœ¨è¿™ä¹‹åå‘ç”Ÿçš„ä¼šç”¨xxxDidxxxã€‚")]),t._v(" "),s("p",[t._v("// å›¾æ¥æºäºç½‘ç»œï¼ˆä¾µåˆ )")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.yuque.com/lark/0/2018/png/5482/1528371738002-2a20482c-f375-45d0-a7e9-3492e2496b0f.png",alt:"image.png | left | 747x414"}})]),t._v(" "),s("p",[t._v("æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¿™ä¸‰ä¸ªé˜¶æ®µåˆ†åˆ«ä»‹ç»ä¸€ä¸‹å„ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè¯¦ç»†çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°è§£é‡Šå¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£ "),s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("React.Component"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"è£…è½½æœŸé—´"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è£…è½½æœŸé—´","aria-hidden":"true"}},[t._v("#")]),t._v(" è£…è½½æœŸé—´")]),t._v(" "),s("p",[t._v("ç»„ä»¶è¢«å®ä¾‹åŒ–å¹¶æŒ‚è½½åœ¨åˆ°DOMæ ‘è¿™ä¸€è¿‡ç¨‹ç§°ä¸ºè£…è½½ï¼Œåœ¨è£…è½½æœŸè°ƒç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¾æ¬¡ä¸º")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#constructor",target:"_blank",rel:"noopener noreferrer"}},[t._v("constructor()"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#static-getderivedstatefromprops",target:"_blank",rel:"noopener noreferrer"}},[t._v("getDerivedStateFromProps"),s("OutboundLink")],1),t._v("()")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#render",target:"_blank",rel:"noopener noreferrer"}},[t._v("render()"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#componentdidmount",target:"_blank",rel:"noopener noreferrer"}},[t._v("componentDidMount()"),s("OutboundLink")],1)])]),t._v(" "),s("hr"),t._v(" "),s("h4",{attrs:{id:"constructor-props"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#constructor-props","aria-hidden":"true"}},[t._v("#")]),t._v(" constructor(props)")]),t._v(" "),s("p",[t._v("æ„é€ å‡½æ•°ï¼Œç”¨äºåˆå§‹åŒ–è¿™ä¸ªç»„ä»¶çš„ä¸€äº›çŠ¶æ€å’Œæ“ä½œï¼Œå¦‚æœä½ æ˜¯é€šè¿‡ç»§æ‰¿"),s("code",[t._v("React.Component")]),t._v("å­ç±»æ¥åˆ›å»ºReactçš„ç»„ä»¶çš„ï¼Œé‚£ä¹ˆä½ åº”å½“é¦–å…ˆè°ƒç”¨"),s("code",[t._v("super(props)")]),t._v(" åˆå§‹åŒ–çˆ¶ç±»ã€‚")]),t._v(" "),s("p",[t._v("åœ¨contructorå‡½æ•°ä¸­ï¼Œä½ å¯ä»¥"),s("strong",[t._v("åˆå§‹åŒ–state")]),t._v("ï¼Œæ¯”å¦‚"),s("code",[t._v("this.state = {xxx};")]),t._v("ï¼Œä¸è¦åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨setState()å‡½æ•°ï¼Œå¼ºè¡Œä½¿ç”¨çš„è¯Reactä¼šæŠ¥é”™ã€‚å…¶æ¬¡ä½ å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­"),s("strong",[t._v("è¿›è¡Œå‡½æ•°bind")]),t._v("ï¼Œå¦‚:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleClick "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("ä¸€ä¸ªç¤ºä¾‹contructorå®ç°å¦‚ä¸‹:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#fff'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleClick "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å¦‚æœä½ ä¸éœ€è¦åˆå§‹åŒ–çŠ¶æ€ä¹Ÿä¸éœ€è¦ç»‘å®šhandleå‡½æ•°çš„thisï¼Œé‚£ä¹ˆä½ å¯ä»¥ä¸å®ç°constructorå‡½æ•°ï¼Œç”±é»˜è®¤å®ç°ä»£æ›¿ã€‚")]),t._v(" "),s("hr"),t._v(" "),s("h4",{attrs:{id:"å…³äºbindå‡½æ•°çš„è§£é‡Šè¯´æ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å…³äºbindå‡½æ•°çš„è§£é‡Šè¯´æ˜","aria-hidden":"true"}},[t._v("#")]),t._v(" å…³äºbindå‡½æ•°çš„è§£é‡Šè¯´æ˜")]),t._v(" "),s("p",[t._v("æ³¨æ„jsçš„thisæŒ‡å‘æ¯”è¾ƒç‰¹æ®Šï¼Œæ¯”å¦‚ä»¥ä¸‹çš„ä¾‹å­ä½œä¸ºonClickå›è°ƒå‡½æ•°ç”±buttonç»„ä»¶å»è°ƒç”¨çš„æ—¶å€™ä¸ä¼šæŠŠç»„ä»¶ç±»çš„ä¸Šä¸‹æ–‡å¸¦è¿‡å»ã€‚")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'handleClick'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// undefined")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("click"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("è¿™ç§é—®é¢˜æ¨èä¸‰ç§å¯èƒ½çš„è§£å†³æ–¹å¼ï¼Œå…¶æ ¸å¿ƒå‡ä¸ºå°†å‡½æ•°çš„thiså¼ºåˆ¶ç»‘å®šåˆ°ç»„ä»¶ç±»ä¸Š:\n1. å°±æ˜¯ä¸Šé¢è¯´çš„åœ¨constructorå‡½æ•°ä¸­æ˜¾ç¤ºè°ƒç”¨bindã€‚\n2. åœ¨onClickçš„æ—¶å€™è¿›è¡Œbind: <button onClick = {this.handleClick.bind(this)} >ï¼Œè¿™ç§æ–¹å¼çš„åŠ£åŠ¿æ˜¯æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½éœ€è¦è¿›è¡Œbindï¼Œä¼˜åŠ¿æ˜¯æ–¹ä¾¿ä¼ å‚ï¼Œå¤„ç†å‡½æ•°éœ€è¦ä¼ å‚å¯ä»¥å‚è€ƒReactçš„æ–‡æ¡£ "),s("a",{attrs:{href:"https://reactjs.org/docs/handling-events.html#passing-arguments-to-event-handlers",target:"_blank",rel:"noopener noreferrer"}},[t._v("Passing Arguments to Event Handlers"),s("OutboundLink")],1),t._v("\n3. å£°æ˜å‡½æ•°æ—¶ä½¿ç”¨ç®­å¤´åŒ¿åå‡½æ•°ï¼Œç®­å¤´å‡½æ•°ä¼šè‡ªåŠ¨è®¾ç½®thisä¸ºå½“å‰ç±»ã€‚("),s("strong",[t._v("ç®€æ´æœ‰æ•ˆï¼Œå¢™è£‚æ¨è")]),t._v(")")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleClick")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'handleClick'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Component")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("hr"),t._v(" "),s("h4",{attrs:{id:"getderivedstatefromprops"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getderivedstatefromprops","aria-hidden":"true"}},[t._v("#")]),t._v(" getDerivedStateFromProps()")]),t._v(" "),s("p",[t._v('è¿™ä¸ªå‡½æ•°ä¼šåœ¨renderå‡½æ•°è¢«è°ƒç”¨ä¹‹å‰è°ƒç”¨ï¼ŒåŒ…æ‹¬ç¬¬ä¸€æ¬¡çš„åˆå§‹åŒ–ç»„ä»¶ä»¥åŠåç»­çš„æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œ<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">æ¯æ¬¡æ¥æ”¶æ–°çš„propsä¹‹åéƒ½ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ä½œä¸ºæ–°çš„stateï¼Œè¿”å›nullåˆ™è¯´æ˜ä¸éœ€è¦æ›´æ–°stateã€‚</span></span>')]),t._v(" "),s("p",[t._v('è¯¥æ–¹æ³•ä¸»è¦ç”¨æ¥æ›¿ä»£<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">componentWillReceivePropsæ–¹æ³•ï¼ŒwillReceivePropsç»å¸¸è¢«è¯¯ç”¨ï¼Œå¯¼è‡´äº†ä¸€äº›é—®é¢˜ï¼Œå› æ­¤åœ¨æ–°ç‰ˆæœ¬ä¸­è¢«æ ‡è®°ä¸ºunsafeã€‚ä»¥</span></span>'),s("a",{attrs:{href:"https://juejin.im/post/5abf4a09f265da237719899d",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ˜é‡‘"),s("OutboundLink")],1),t._v('<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">ä¸Šçš„ğŸŒ°ä¸ºä¾‹ï¼Œ</span></span>componentWillReceivePropsçš„å¸¸è§ç”¨æ³•å¦‚ä¸‹ï¼Œæ ¹æ®ä¼ è¿›æ¥çš„å±æ€§å€¼åˆ¤æ–­æ˜¯å¦è¦loadæ–°çš„æ•°æ®')]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExampleComponent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    isScrollingDown"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentWillReceiveProps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentRow "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" nextProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentRow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ£€æµ‹åˆ°å˜åŒ–åæ›´æ–°çŠ¶æ€ã€å¹¶è¯·æ±‚æ•°æ®")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        isScrollingDown"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nextProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentRow "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentRow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadAsyncData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadAsyncData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v('ä½†è¿™ä¸ªæ–¹æ³•çš„ä¸€ä¸ªé—®é¢˜æ˜¯<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">å¤–éƒ¨ç»„ä»¶å¤šæ¬¡é¢‘ç¹æ›´æ–°ä¼ å…¥å¤šæ¬¡ä¸åŒçš„ propsï¼Œè€Œè¯¥ç»„ä»¶å°†è¿™äº›æ›´æ–° batch åä»…ä»…è§¦å‘å•æ¬¡è‡ªå·±çš„æ›´æ–°ï¼Œè¿™ç§å†™æ³•ä¼šå¯¼è‡´ä¸å¿…è¦çš„å¼‚æ­¥è¯·æ±‚ï¼Œç›¸æ¯”ä¸‹æ¥</span></span>getDerivedStateFromPropsé…åˆcomponentDidUpdateçš„å†™æ³•å¦‚ä¸‹:')]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExampleComponent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    isScrollingDown"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    lastRow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDerivedStateFromProps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸å†æä¾› prevProps çš„è·å–æ–¹å¼")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentRow "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" prevState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastRow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        isScrollingDown"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nextProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentRow "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" prevState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastRow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        lastRow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nextProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentRow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é»˜è®¤ä¸æ”¹åŠ¨ state")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»…åœ¨æ›´æ–°è§¦å‘åè¯·æ±‚æ•°æ®")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadAsyncData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadAsyncData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("è¿™ç§æ–¹å¼åªåœ¨æ›´æ–°è§¦å‘åè¯·æ±‚æ•°æ®ï¼Œç›¸æ¯”ä¸‹æ¥æ›´èŠ‚çœèµ„æºã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v('æ³¨æ„<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">getDerivedStateFromPropsæ˜¯ä¸€ä¸ªstaticæ–¹æ³•ï¼Œæ„å‘³ç€æ‹¿ä¸åˆ°å®ä¾‹çš„this</span></span>')])]),t._v(" "),s("hr"),t._v(" "),s("h4",{attrs:{id:"render"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#render","aria-hidden":"true"}},[t._v("#")]),t._v(" render()")]),t._v(" "),s("blockquote",[s("p",[t._v("è¯¥æ–¹æ³•åœ¨ä¸€ä¸ªReactç»„ä»¶ä¸­æ˜¯å¿…é¡»å®ç°çš„ï¼Œä½ å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªjava interfaceçš„æ¥å£")])]),t._v(" "),s("p",[t._v("è¿™æ˜¯Reactç»„ä»¶çš„æ ¸å¿ƒæ–¹æ³•ï¼Œç”¨äºæ ¹æ®çŠ¶æ€stateå’Œå±æ€§propsæ¸²æŸ“ä¸€ä¸ªReactç»„ä»¶ã€‚æˆ‘ä»¬åº”è¯¥ä¿æŒè¯¥æ–¹æ³•çš„çº¯æ´æ€§ï¼Œè¿™ä¼šè®©æˆ‘ä»¬çš„ç»„ä»¶æ›´æ˜“äºç†è§£ï¼Œåªè¦stateå’Œpropsä¸å˜ï¼Œæ¯æ¬¡è°ƒç”¨renderè¿”å›çš„ç»“æœåº”å½“ç›¸åŒï¼Œæ‰€ä»¥è¯·"),s("strong",[t._v("ä¸è¦åœ¨renderæ–¹æ³•ä¸­æ”¹å˜ç»„ä»¶çŠ¶æ€ï¼Œä¹Ÿä¸è¦åœ¨åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å’Œæµè§ˆå™¨ç›´æ¥äº¤äº’")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœä½ Reactå¦‚ä½•ä½¿ç”¨renderæ–¹æ³•åŸç†ä¸å¤ªäº†è§£ï¼Œå¯ä»¥é˜…è¯»æ–‡ç« ã€Š"),s("a",{attrs:{href:"https://lark.alipay.com/afx-es/ffb/react-intro",target:"_blank",rel:"noopener noreferrer"}},[t._v("å½“Reactæ¥æ•²é—¨"),s("OutboundLink")],1),t._v("ã€‹ã€‚")]),t._v(" "),s("hr"),t._v(" "),s("h4",{attrs:{id:"componentdidmount"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#componentdidmount","aria-hidden":"true"}},[t._v("#")]),t._v(" componentDidMount()")]),t._v(" "),s("p",[t._v("componentDidMountæ–¹æ³•ä¼šåœ¨renderæ–¹æ³•ä¹‹åç«‹å³è¢«è°ƒç”¨ï¼Œè¯¥æ–¹æ³•åœ¨æ•´ä¸ªReactç”Ÿå‘½å‘¨æœŸä¸­åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚Reactçš„ç»„ä»¶æ ‘æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œæ­¤æ—¶ä½ å¯ä»¥è®¤ä¸ºè¿™ä¸ªç»„ä»¶ä»¥åŠä»–ä¸‹é¢çš„æ‰€æœ‰å­ç»„ä»¶éƒ½å·²ç»æ¸²æŸ“å®Œäº†ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä½ å¯ä»¥è°ƒç”¨å’ŒçœŸå®DOMç›¸å…³çš„æ“ä½œäº†ã€‚")]),t._v(" "),s("p",[t._v("æœ‰äº›ç»„ä»¶çš„å¯åŠ¨å·¥ä½œæ˜¯ä¾èµ– DOM çš„ï¼Œä¾‹å¦‚åŠ¨ç”»çš„å¯åŠ¨ï¼Œè€ŒÂ "),s("code",[t._v("componentWillMount")]),t._v("Â çš„æ—¶å€™ç»„ä»¶è¿˜æ²¡æŒ‚è½½å®Œæˆï¼Œæ‰€ä»¥æ²¡æ³•è¿›è¡Œè¿™äº›å¯åŠ¨å·¥ä½œï¼Œè¿™æ—¶å€™å°±å¯ä»¥æŠŠè¿™äº›æ“ä½œæ”¾åœ¨Â "),s("code",[t._v("componentDidMount")]),t._v("Â å½“ä¸­ã€‚")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬æ¨èå¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­"),s("strong",[t._v("å‘é€å¼‚æ­¥è¯·æ±‚")]),t._v("ï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­è°ƒç”¨setState()è®¾ç½®stateï¼Œç­‰æ•°æ®åˆ°è¾¾åè§¦å‘é‡æ–°æ¸²æŸ“ã€‚ä½†æ³¨æ„å°½é‡"),s("strong",[t._v("ä¸è¦")]),t._v("åœ¨è¿™ä¸ªå‡½æ•°ä¸­"),s("strong",[t._v("ç›´æ¥è°ƒç”¨")]),t._v("setState()è®¾ç½®çŠ¶æ€ï¼Œè¿™ä¼šè§¦å‘ä¸€æ¬¡é¢å¤–çš„é‡æ–°æ¸²æŸ“ï¼Œå¯èƒ½é€ æˆæ€§èƒ½é—®é¢˜ã€‚")]),t._v(" "),s("p",[t._v("ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•åœ¨componentDidMountåŠ è½½æ•°æ®å¹¶è®¾ç½®çŠ¶æ€:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidMount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'componentDidMount'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://api.github.com/search/repositories?q=language:java&sort=stars"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§¦å‘render")]),t._v("\n            items"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("items\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this.setState({color: xxx}) // ä¸è¦è¿™æ ·åš")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("hr"),t._v(" "),s("h3",{attrs:{id:"æ›´æ–°æœŸé—´"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ›´æ–°æœŸé—´","aria-hidden":"true"}},[t._v("#")]),t._v(" æ›´æ–°æœŸé—´")]),t._v(" "),s("p",[t._v("å½“ç»„ä»¶çš„çŠ¶æ€æˆ–å±æ€§å˜åŒ–æ—¶ä¼šè§¦å‘æ›´æ–°ï¼Œæ›´æ–°è¿‡ç¨‹ä¸­ä¼šä¾æ¬¡è°ƒç”¨ä»¥ä¸‹æ–¹æ³•:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#static-getderivedstatefromprops",target:"_blank",rel:"noopener noreferrer"}},[t._v("getDerivedStateFromProps()"),s("OutboundLink")],1),t._v("  ä¸Šæ–‡å·²æè¿°ï¼Œä¸èµ˜è¿°")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#unsafe_componentwillupdate",target:"_blank",rel:"noopener noreferrer"}},[t._v("componentWillUpdate()"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#render",target:"_blank",rel:"noopener noreferrer"}},[t._v("render()"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#getsnapshotbeforeupdate",target:"_blank",rel:"noopener noreferrer"}},[t._v("getSnapshotBeforeUpdate()"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#componentdidupdate",target:"_blank",rel:"noopener noreferrer"}},[t._v("componentDidUpdate()"),s("OutboundLink")],1)])]),t._v(" "),s("hr"),t._v(" "),s("h4",{attrs:{id:"shouldcomponentupdate-nextprops-nextstate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#shouldcomponentupdate-nextprops-nextstate","aria-hidden":"true"}},[t._v("#")]),t._v(" shouldComponentUpdate(nextProps, nextState)")]),t._v(" "),s("p",[t._v("ä½ å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•æ¥å‘Šè¯‰Reactæ˜¯å¦è¦è¿›è¡Œä¸‹ä¸€æ¬¡render()ï¼Œé»˜è®¤è¿™ä¸ªå‡½æ•°æ”¾å›trueï¼Œå³æ¯æ¬¡æ›´æ–°çŠ¶æ€å’Œå±æ€§çš„æ—¶å€™éƒ½è¿›è¡Œç»„ä»¶æ›´æ–°ã€‚æ³¨æ„è¿™ä¸ªå‡½æ•°å¦‚æœè¿”å›falseå¹¶ä¸ä¼šå¯¼è‡´å­ç»„ä»¶ä¹Ÿä¸æ›´æ–°ã€‚")]),t._v(" "),s("p",[t._v("è¿™ä¸ªé’©å­å‡½æ•°**ä¸€èˆ¬ä¸éœ€è¦å®ç°, **å¦‚æœä½ çš„ç»„ä»¶æ€§èƒ½æ¯”è¾ƒå·®æˆ–è€…æ¸²æŸ“æ¯”è¾ƒè€—æ—¶ï¼Œä½ å¯ä»¥è€ƒè™‘ä½¿"),s("a",{attrs:{href:"https://reactjs.org/docs/react-api.html#reactpurecomponent",target:"_blank",rel:"noopener noreferrer"}},[t._v("React.PureComponent"),s("OutboundLink")],1),t._v(" é‡æ–°å®ç°è¯¥ç»„ä»¶ï¼ŒPureComponenté»˜è®¤å®ç°äº†ä¸€ä¸ªç‰ˆæœ¬çš„shouldComponentUpdateä¼šè¿›è¡Œstateå’Œpropsçš„æ¯”è¾ƒã€‚å½“ç„¶å¦‚æœä½ æœ‰è‡ªä¿¡ï¼Œå¯ä»¥è‡ªå·±å®ç°æ¯”è¾ƒnextPropså’ŒnextStateæ˜¯å¦å‘ç”Ÿäº†æ”¹å˜ã€‚")]),t._v(" "),s("p",[t._v("è¯¥å‡½æ•°é€šå¸¸æ˜¯ä¼˜åŒ–æ€§èƒ½çš„ç´§æ€¥å‡ºå£ï¼Œæ˜¯ä¸ªå¤§æ‹›ï¼Œä¸è¦è½»æ˜“ç”¨ï¼Œå¦‚æœè¦ç”¨å¯ä»¥å‚è€ƒ"),s("a",{attrs:{href:"https://github.com/camsong/blog/issues/3",target:"_blank",rel:"noopener noreferrer"}},[t._v("Immutable è¯¦è§£åŠ React ä¸­å®è·µ"),s("OutboundLink")],1),t._v("Â .")]),t._v(" "),s("hr"),t._v(" "),s("h4",{attrs:{id:"getsnapshotbeforeupdate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getsnapshotbeforeupdate","aria-hidden":"true"}},[t._v("#")]),t._v(" getSnapshotBeforeUpdate()")]),t._v(" "),s("p",[t._v('è¯¥æ–¹æ³•çš„è§¦å‘æ—¶é—´ä¸º<span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">updateå‘ç”Ÿçš„æ—¶å€™ï¼Œåœ¨renderä¹‹ådomæ¸²æŸ“ä¹‹å‰</span></span>è¿”å›ä¸€ä¸ªå€¼ï¼Œä½œä¸ºcomponentDidUpdateçš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚<span data-type="color" style="color:rgb(26, 26, 26)"><span data-type="background" style="background-color:rgb(255, 255, 255)">è¯¥å‡½æ•°ä¸ componentDidUpdate ä¸€èµ·ä½¿ç”¨å¯ä»¥å–ä»£ componentWillUpdate çš„æ‰€æœ‰åŠŸèƒ½</span></span>ï¼Œæ¯”å¦‚ä»¥ä¸‹æ˜¯å®˜æ–¹çš„ä¾‹å­:')]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ScrollingList")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listRef "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSnapshotBeforeUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prevProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Are we adding new items to the list?")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Capture the scroll position so we can adjust scroll later.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prevProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollHeight "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollTop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prevProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" snapshot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If we have a snapshot value, we've just added new items.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Adjust scroll so these new items don't push the old ones out of view.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// (snapshot here is the value returned from getSnapshotBeforeUpdate)")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("snapshot "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollTop "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollHeight "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" snapshot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ...contents... */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("hr"),t._v(" "),s("h4",{attrs:{id:"componentdidupdate-prevprops-prevstate-snapshot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#componentdidupdate-prevprops-prevstate-snapshot","aria-hidden":"true"}},[t._v("#")]),t._v(" componentDidUpdate(prevProps, prevState, snapshot)")]),t._v(" "),s("p",[t._v("è¯¥æ–¹æ³•ä¼šåœ¨æ›´æ–°å®Œæˆåè¢«ç«‹å³è°ƒç”¨ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿›è¡Œ"),s("strong",[t._v("DOMæ“ä½œ")]),t._v("ï¼Œæˆ–è€…**åšä¸€äº›å¼‚æ­¥è°ƒç”¨ã€‚**è¿™ä¸ªå’Œé¦–æ¬¡è£…è½½è¿‡ç¨‹åè°ƒç”¨componentDidMountæ˜¯ç±»ä¼¼çš„ï¼Œä¸ä¸€æ ·çš„æ˜¯ä½ å¯èƒ½éœ€è¦åˆ¤æ–­ä¸‹å±æ€§æ˜¯å¦å˜åŒ–äº†å†å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œå¦‚ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prevProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¥è‡ªç½‘ç»œ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prevProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("myProps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("myProp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this.props.myProp has a different value")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// we can perform any operations that would ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// need the new value and/or cause side-effects ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// like AJAX calls with the new value - this.props.myProp")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("hr"),t._v(" "),s("h3",{attrs:{id:"å¸è½½æœŸé—´"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¸è½½æœŸé—´","aria-hidden":"true"}},[t._v("#")]),t._v(" å¸è½½æœŸé—´")]),t._v(" "),s("p",[t._v("å¸è½½æœŸé—´æ˜¯æŒ‡ç»„ä»¶è¢«ä»DOMæ ‘ä¸­ç§»é™¤æ—¶ï¼Œè°ƒç”¨çš„ç›¸å…³æ–¹æ³•ä¸º:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#componentwillunmount",target:"_blank",rel:"noopener noreferrer"}},[t._v("componentWillUnmount()"),s("OutboundLink")],1)])]),t._v(" "),s("h4",{attrs:{id:"componentwillunmount"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#componentwillunmount","aria-hidden":"true"}},[t._v("#")]),t._v(" componentWillUnmount()")]),t._v(" "),s("p",[t._v("è¯¥æ–¹æ³•ä¼šåœ¨ç»„ä»¶è¢«å¸è½½ä¹‹å‰è¢«è°ƒç”¨ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­è¿›è¡Œç›¸å…³æ¸…ç†å·¥ä½œï¼Œæ¯”å¦‚åˆ é™¤å®šæ—¶å™¨ã€‚")]),t._v(" "),s("p",[t._v("ä¸‹é¢ç»™ä¸ªç¤ºä¾‹ä»£ç :")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentWillUnmount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'componentWillUnmount'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¸…é™¤timer")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timerID1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timerID2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…³é—­socket")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("myWebsocket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å–æ¶ˆæ¶ˆæ¯è®¢é˜…...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("hr"),t._v(" "),s("h3",{attrs:{id:"é”™è¯¯æ•è·"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é”™è¯¯æ•è·","aria-hidden":"true"}},[t._v("#")]),t._v(" é”™è¯¯æ•è·")]),t._v(" "),s("p",[t._v("React16ä¸­æ–°å¢äº†ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#componentdidcatch",target:"_blank",rel:"noopener noreferrer"}},[t._v("componentDidCatch()"),s("OutboundLink")],1)])]),t._v(" "),s("h4",{attrs:{id:"componentdidcatch-error-info"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#componentdidcatch-error-info","aria-hidden":"true"}},[t._v("#")]),t._v(" componentDidCatch(error, info)")]),t._v(" "),s("p",[t._v("åœ¨reactç»„ä»¶ä¸­å¦‚æœäº§ç”Ÿçš„é”™è¯¯æ²¡æœ‰è¢«è¢«æ•è·ä¼šè¢«æŠ›ç»™ä¸Šå±‚ç»„ä»¶ï¼Œå¦‚æœä¸Šå±‚ä¹Ÿä¸å¤„ç†çš„è¯å°±ä¼šæŠ›åˆ°é¡¶å±‚å¯¼è‡´æµè§ˆå™¨ç™½å±é”™è¯¯ï¼Œåœ¨React16ä¸­æˆ‘ä»¬å¯ä»¥å®ç°è¿™ä¸ªæ–¹æ³•æ¥æ•è·"),s("strong",[t._v("å­ç»„ä»¶")]),t._v("äº§ç”Ÿçš„é”™è¯¯ï¼Œç„¶ååœ¨çˆ¶ç»„ä»¶ä¸­å¦¥å–„å¤„ç†ï¼Œæ¯”å¦‚æä¸ªå¼¹å±‚é€šçŸ¥ç”¨æˆ·ç½‘é¡µå´©æºƒç­‰ã€‚")]),t._v(" "),s("p",[t._v("åœ¨è¿™ä¸ªå‡½æ•°ä¸­è¯·åªè¿›è¡Œé”™è¯¯æ¢å¤ç›¸å…³çš„å¤„ç†ï¼Œä¸è¦åšå…¶ä»–æµç¨‹æ§åˆ¶æ–¹é¢çš„æ“ä½œã€‚æ¯”å¦‚:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidCatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// from react.org")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Display fallback UI")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" hasError"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// You can also log the error to an error reporting service")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("logErrorToMyService")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("hr"),t._v(" "),s("h3",{attrs:{id:"react16ä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å˜åŒ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react16ä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å˜åŒ–","aria-hidden":"true"}},[t._v("#")]),t._v(" React16ä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å˜åŒ–")]),t._v(" "),s("p",[t._v("componentWillMountï¼ŒcomponentWillUpdate, componentWillReceivePropsç­‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åœ¨ä¸‹ä¸ªä¸»ç‰ˆæœ¬ä¸­ä¼šè¢«åºŸå¼ƒ?")]),t._v(" "),s("p",[t._v("æ ¹æ®è¿™ä»½"),s("a",{attrs:{href:"https://github.com/reactjs/rfcs/blob/master/text/0006-static-lifecycle-methods.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC"),s("OutboundLink")],1),t._v("ï¼Œæ˜¯çš„ï¼Œè¿™äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼Œåœ¨React16ä¸­è¢«é‡å‘½åä¸ºUNSAFE_componentWillMountï¼ŒUNSAFE_componentWillUpdateï¼ŒUNSAFE_componentWillReceivePropsï¼Œè€Œåœ¨æ›´ä¸‹ä¸ªå¤§ç‰ˆæœ¬ä¸­ä»–ä»¬ä¼šè¢«åºŸå¼ƒã€‚è¯¦è§"),s("a",{attrs:{href:"https://reactjs.org/blog/2018/03/29/react-v-16-3.html",target:"_blank",rel:"noopener noreferrer"}},[t._v(" React 16.3ç‰ˆæœ¬å‘å¸ƒå…¬å‘Š"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“","aria-hidden":"true"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),s("p",[t._v("æ€»ç»“ä¸€ä¸‹ï¼Œä»¥ä¸Šè®²çš„è¿™äº›ç”Ÿå‘½å‘¨æœŸéƒ½æœ‰è‡ªå·±å­˜åœ¨çš„æ„ä¹‰ï¼Œä½†åœ¨Reactä½¿ç”¨è¿‡ç¨‹ä¸­æˆ‘ä»¬æœ€å¸¸ç”¨åˆ°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯å¦‚ä¸‹å‡ ä¸ª:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("constructor")]),t._v(": åˆå§‹åŒ–çŠ¶æ€ï¼Œè¿›è¡Œå‡½æ•°ç»‘å®š")]),t._v(" "),s("li",[s("strong",[t._v("componentDidMount")]),t._v(": è¿›è¡ŒDOMæ“ä½œï¼Œè¿›è¡Œå¼‚æ­¥è°ƒç”¨åˆå§‹åŒ–é¡µé¢")]),t._v(" "),s("li",[s("strong",[t._v("componentWillReceiveProps")]),t._v(": æ ¹æ®propsæ›´æ–°çŠ¶æ€")]),t._v(" "),s("li",[s("strong",[t._v("componentWillUnmount")]),t._v(": æ¸…ç†ç»„ä»¶å®šæ—¶å™¨ï¼Œç½‘ç»œè¯·æ±‚æˆ–è€…ç›¸å…³è®¢é˜…ç­‰")])]),t._v(" "),s("h3",{attrs:{id:"å‚è€ƒæ–‡ç« "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒæ–‡ç« ","aria-hidden":"true"}},[t._v("#")]),t._v(" å‚è€ƒæ–‡ç« ")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://www.mrfront.com/2016/05/03/react-components-study-states/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.mrfront.com/2016/05/03/react-components-study-states/"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/superman66/Front-End-Blog/issues/2",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/superman66/Front-End-Blog/issues/2"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.im/entry/587de1b32f301e0057a28897",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://juejin.im/entry/587de1b32f301e0057a28897"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/JasonBoy/javascript/tree/master/react",target:"_blank",rel:"noopener noreferrer"}},[t._v("Airbnb React/JSX ç¼–ç è§„èŒƒ"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://segmentfault.com/a/1190000013354181",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç†è§£Reactç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://medium.com/@baphemot/understanding-reactjs-component-life-cycle-823a640b3e8d",target:"_blank",rel:"noopener noreferrer"}},[t._v("Understanding Reactâ€Šâ€”â€ŠComponent life-cycle"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/26027085",target:"_blank",rel:"noopener noreferrer"}},[t._v("React Fiberæ˜¯ä»€ä¹ˆ"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://reactjs.org/docs/react-component.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("react component"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.im/post/5abf4a09f265da237719899d",target:"_blank",rel:"noopener noreferrer"}},[t._v("è®²è®²ä»Šå React å¼‚æ­¥æ¸²æŸ“å¸¦æ¥çš„ç”Ÿå‘½å‘¨æœŸå˜åŒ–"),s("OutboundLink")],1)])])])},[],!1,null,null,null);a.default=e.exports}}]);